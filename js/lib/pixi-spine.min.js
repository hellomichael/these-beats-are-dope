var __extends=this&&this.__extends||function(a,b){function d(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)},PIXI;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(a,b,c){if(null==a)throw new Error("name cannot be null.");if(null==b)throw new Error("timelines cannot be null.");this.name=a,this.timelines=b,this.duration=c}return a.prototype.apply=function(a,b,c,d,e,f,g,h){if(null==a)throw new Error("skeleton cannot be null.");d&&0!=this.duration&&(c%=this.duration,b>0&&(b%=this.duration));for(var i=this.timelines,j=0,k=i.length;j<k;j++)i[j].apply(a,b,c,e,f,g,h)},a.binarySearch=function(a,b,c){void 0===c&&(c=1);var d=0,e=a.length/c-2;if(0==e)return c;for(var f=e>>>1;;){if(a[(f+1)*c]<=b?d=f+1:e=f,d==e)return(d+1)*c;f=d+e>>>1}},a.linearSearch=function(a,b,c){for(var d=0,e=a.length-c;d<=e;d+=c)if(a[d]>b)return d;return-1},a}();a.Animation=b,function(a){a[a.rotate=0]="rotate",a[a.translate=1]="translate",a[a.scale=2]="scale",a[a.shear=3]="shear",a[a.attachment=4]="attachment",a[a.color=5]="color",a[a.deform=6]="deform",a[a.event=7]="event",a[a.drawOrder=8]="drawOrder",a[a.ikConstraint=9]="ikConstraint",a[a.transformConstraint=10]="transformConstraint",a[a.pathConstraintPosition=11]="pathConstraintPosition",a[a.pathConstraintSpacing=12]="pathConstraintSpacing",a[a.pathConstraintMix=13]="pathConstraintMix"}(a.TimelineType||(a.TimelineType={}));var c=a.TimelineType,d=function(){function b(c){if(c<=0)throw new Error("frameCount must be > 0: "+c);this.curves=a.Utils.newFloatArray((c-1)*b.BEZIER_SIZE)}return b.prototype.getFrameCount=function(){return this.curves.length/b.BEZIER_SIZE+1},b.prototype.setLinear=function(a){this.curves[a*b.BEZIER_SIZE]=b.LINEAR},b.prototype.setStepped=function(a){this.curves[a*b.BEZIER_SIZE]=b.STEPPED},b.prototype.getCurveType=function(a){var c=a*b.BEZIER_SIZE;if(c==this.curves.length)return b.LINEAR;var d=this.curves[c];return d==b.LINEAR?b.LINEAR:d==b.STEPPED?b.STEPPED:b.BEZIER},b.prototype.setCurve=function(a,c,d,e,f){var g=.03*(2*-c+e),h=.03*(2*-d+f),i=.006*(3*(c-e)+1),j=.006*(3*(d-f)+1),k=2*g+i,l=2*h+j,m=.3*c+g+.16666667*i,n=.3*d+h+.16666667*j,o=a*b.BEZIER_SIZE,p=this.curves;p[o++]=b.BEZIER;for(var q=m,r=n,s=o+b.BEZIER_SIZE-1;o<s;o+=2)p[o]=q,p[o+1]=r,m+=k,n+=l,k+=i,l+=j,q+=m,r+=n},b.prototype.getCurvePercent=function(c,d){d=a.MathUtils.clamp(d,0,1);var e=this.curves,f=c*b.BEZIER_SIZE,g=e[f];if(g==b.LINEAR)return d;if(g==b.STEPPED)return 0;f++;for(var h=0,i=f,j=f+b.BEZIER_SIZE-1;f<j;f+=2)if(h=e[f],h>=d){var k=void 0,l=void 0;return f==i?(k=0,l=0):(k=e[f-2],l=e[f-1]),l+(e[f+1]-l)*(d-k)/(h-k)}var m=e[f-1];return m+(1-m)*(d-h)/(1-h)},b.LINEAR=0,b.STEPPED=1,b.BEZIER=2,b.BEZIER_SIZE=19,b}();a.CurveTimeline=d;var e=function(d){function e(b){d.call(this,b),this.frames=a.Utils.newFloatArray(b<<1)}return __extends(e,d),e.prototype.getPropertyId=function(){return(c.rotate<<24)+this.boneIndex},e.prototype.setFrame=function(a,b,c){a<<=1,this.frames[a]=b,this.frames[a+e.ROTATION]=c},e.prototype.apply=function(a,c,d,f,g,h,i){var j=this.frames,k=a.bones[this.boneIndex];if(d<j[0])return void(h&&(k.rotation=k.data.rotation));if(d>=j[j.length-e.ENTRIES])if(h)k.rotation=k.data.rotation+j[j.length+e.PREV_ROTATION]*g;else{var l=k.data.rotation+j[j.length+e.PREV_ROTATION]-k.rotation;l-=360*(16384-(16384.499999999996-l/360|0)),k.rotation+=l*g}else{var m=b.binarySearch(j,d,e.ENTRIES),n=j[m+e.PREV_ROTATION],o=j[m],p=this.getCurvePercent((m>>1)-1,1-(d-o)/(j[m+e.PREV_TIME]-o)),q=j[m+e.ROTATION]-n;q-=360*(16384-(16384.499999999996-q/360|0)),q=n+q*p,h?(q-=360*(16384-(16384.499999999996-q/360|0)),k.rotation=k.data.rotation+q*g):(q=k.data.rotation+q-k.rotation,q-=360*(16384-(16384.499999999996-q/360|0)),k.rotation+=q*g)}},e.ENTRIES=2,e.PREV_TIME=-2,e.PREV_ROTATION=-1,e.ROTATION=1,e}(d);a.RotateTimeline=e;var f=function(d){function e(b){d.call(this,b),this.frames=a.Utils.newFloatArray(b*e.ENTRIES)}return __extends(e,d),e.prototype.getPropertyId=function(){return(c.translate<<24)+this.boneIndex},e.prototype.setFrame=function(a,b,c,d){a*=e.ENTRIES,this.frames[a]=b,this.frames[a+e.X]=c,this.frames[a+e.Y]=d},e.prototype.apply=function(a,c,d,f,g,h,i){var j=this.frames,k=a.bones[this.boneIndex];if(d<j[0])return void(h&&(k.x=k.data.x,k.y=k.data.y));var l=0,m=0;if(d>=j[j.length-e.ENTRIES])l=j[j.length+e.PREV_X],m=j[j.length+e.PREV_Y];else{var n=b.binarySearch(j,d,e.ENTRIES);l=j[n+e.PREV_X],m=j[n+e.PREV_Y];var o=j[n],p=this.getCurvePercent(n/e.ENTRIES-1,1-(d-o)/(j[n+e.PREV_TIME]-o));l+=(j[n+e.X]-l)*p,m+=(j[n+e.Y]-m)*p}h?(k.x=k.data.x+l*g,k.y=k.data.y+m*g):(k.x+=(k.data.x+l-k.x)*g,k.y+=(k.data.y+m-k.y)*g)},e.ENTRIES=3,e.PREV_TIME=-3,e.PREV_X=-2,e.PREV_Y=-1,e.X=1,e.Y=2,e}(d);a.TranslateTimeline=f;var g=function(d){function e(a){d.call(this,a)}return __extends(e,d),e.prototype.getPropertyId=function(){return(c.scale<<24)+this.boneIndex},e.prototype.apply=function(c,d,f,g,h,i,j){var k=this.frames,l=c.bones[this.boneIndex];if(f<k[0])return void(i&&(l.scaleX=l.data.scaleX,l.scaleY=l.data.scaleY));var m=0,n=0;if(f>=k[k.length-e.ENTRIES])m=k[k.length+e.PREV_X]*l.data.scaleX,n=k[k.length+e.PREV_Y]*l.data.scaleY;else{var o=b.binarySearch(k,f,e.ENTRIES);m=k[o+e.PREV_X],n=k[o+e.PREV_Y];var p=k[o],q=this.getCurvePercent(o/e.ENTRIES-1,1-(f-p)/(k[o+e.PREV_TIME]-p));m=(m+(k[o+e.X]-m)*q)*l.data.scaleX,n=(n+(k[o+e.Y]-n)*q)*l.data.scaleY}if(1==h)l.scaleX=m,l.scaleY=n;else{var r=0,s=0;i?(r=l.data.scaleX,s=l.data.scaleY):(r=l.scaleX,s=l.scaleY),j?(m=Math.abs(m)*a.MathUtils.signum(r),n=Math.abs(n)*a.MathUtils.signum(s)):(r=Math.abs(r)*a.MathUtils.signum(m),s=Math.abs(s)*a.MathUtils.signum(n)),l.scaleX=r+(m-r)*h,l.scaleY=s+(n-s)*h}},e}(f);a.ScaleTimeline=g;var h=function(a){function d(b){a.call(this,b)}return __extends(d,a),d.prototype.getPropertyId=function(){return(c.shear<<24)+this.boneIndex},d.prototype.apply=function(a,c,e,f,g,h,i){var j=this.frames,k=a.bones[this.boneIndex];if(e<j[0])return void(h&&(k.shearX=k.data.shearX,k.shearY=k.data.shearY));var l=0,m=0;if(e>=j[j.length-d.ENTRIES])l=j[j.length+d.PREV_X],m=j[j.length+d.PREV_Y];else{var n=b.binarySearch(j,e,d.ENTRIES);l=j[n+d.PREV_X],m=j[n+d.PREV_Y];var o=j[n],p=this.getCurvePercent(n/d.ENTRIES-1,1-(e-o)/(j[n+d.PREV_TIME]-o));l+=(j[n+d.X]-l)*p,m+=(j[n+d.Y]-m)*p}h?(k.shearX=k.data.shearX+l*g,k.shearY=k.data.shearY+m*g):(k.shearX+=(k.data.shearX+l-k.shearX)*g,k.shearY+=(k.data.shearY+m-k.shearY)*g)},d}(f);a.ShearTimeline=h;var i=function(d){function e(b){d.call(this,b),this.frames=a.Utils.newFloatArray(b*e.ENTRIES)}return __extends(e,d),e.prototype.getPropertyId=function(){return(c.color<<24)+this.slotIndex},e.prototype.setFrame=function(a,b,c,d,f,g){a*=e.ENTRIES,this.frames[a]=b,this.frames[a+e.R]=c,this.frames[a+e.G]=d,this.frames[a+e.B]=f,this.frames[a+e.A]=g},e.prototype.apply=function(a,c,d,f,g,h,i){var j=a.slots[this.slotIndex],k=this.frames;if(d<k[0])return void(h&&j.color.setFromColor(j.data.color));var l=0,m=0,n=0,o=0;if(d>=k[k.length-e.ENTRIES]){var p=k.length;l=k[p+e.PREV_R],m=k[p+e.PREV_G],n=k[p+e.PREV_B],o=k[p+e.PREV_A]}else{var q=b.binarySearch(k,d,e.ENTRIES);l=k[q+e.PREV_R],m=k[q+e.PREV_G],n=k[q+e.PREV_B],o=k[q+e.PREV_A];var r=k[q],s=this.getCurvePercent(q/e.ENTRIES-1,1-(d-r)/(k[q+e.PREV_TIME]-r));l+=(k[q+e.R]-l)*s,m+=(k[q+e.G]-m)*s,n+=(k[q+e.B]-n)*s,o+=(k[q+e.A]-o)*s}if(1==g)j.color.set(l,m,n,o);else{var t=j.color;h&&t.setFromColor(j.data.color),t.add((l-t.r)*g,(m-t.g)*g,(n-t.b)*g,(o-t.a)*g)}},e.ENTRIES=5,e.PREV_TIME=-5,e.PREV_R=-4,e.PREV_G=-3,e.PREV_B=-2,e.PREV_A=-1,e.R=1,e.G=2,e.B=3,e.A=4,e}(d);a.ColorTimeline=i;var j=function(){function d(b){this.frames=a.Utils.newFloatArray(b),this.attachmentNames=new Array(b)}return d.prototype.getPropertyId=function(){return(c.attachment<<24)+this.slotIndex},d.prototype.getFrameCount=function(){return this.frames.length},d.prototype.setFrame=function(a,b,c){this.frames[a]=b,this.attachmentNames[a]=c},d.prototype.apply=function(a,c,d,e,f,g,h){var i=a.slots[this.slotIndex];if(h&&g){var j=i.data.attachmentName;return void i.setAttachment(null==j?null:a.getAttachment(this.slotIndex,j))}var k=this.frames;if(d<k[0]){if(g){var l=i.data.attachmentName;i.setAttachment(null==l?null:a.getAttachment(this.slotIndex,l))}}else{var m=0;m=d>=k[k.length-1]?k.length-1:b.binarySearch(k,d,1)-1;var n=this.attachmentNames[m];a.slots[this.slotIndex].setAttachment(null==n?null:a.getAttachment(this.slotIndex,n))}},d}();a.AttachmentTimeline=j;var k=function(d){function e(b){d.call(this,b),this.frames=a.Utils.newFloatArray(b),this.frameVertices=new Array(b)}return __extends(e,d),e.prototype.getPropertyId=function(){return(c.deform<<24)+this.slotIndex},e.prototype.setFrame=function(a,b,c){this.frames[a]=b,this.frameVertices[a]=c},e.prototype.apply=function(c,d,e,f,g,h,i){var j=c.slots[this.slotIndex],k=j.getAttachment();if(k instanceof a.VertexAttachment&&k.applyDeform(this.attachment)){var l=this.frames,m=j.attachmentVertices;if(e<l[0])return void(h&&a.Utils.setArraySize(m,0));var n=this.frameVertices,o=n[0].length;m.length!=o&&(g=1);var p=a.Utils.setArraySize(m,o);if(e>=l[l.length-1]){var q=n[l.length-1];if(1==g)a.Utils.arrayCopy(q,0,p,0,o);else if(h){var r=k;if(null==r.bones)for(var s=r.vertices,t=0;t<o;t++){var u=s[t];p[t]=u+(q[t]-u)*g}else for(var t=0;t<o;t++)p[t]=q[t]*g}else for(var t=0;t<o;t++)p[t]+=(q[t]-p[t])*g}else{var v=b.binarySearch(l,e),w=n[v-1],x=n[v],y=l[v],z=this.getCurvePercent(v-1,1-(e-y)/(l[v-1]-y));if(1==g)for(var t=0;t<o;t++){var A=w[t];p[t]=A+(x[t]-A)*z}else if(h){var r=k;if(null==r.bones)for(var s=r.vertices,t=0;t<o;t++){var A=w[t],u=s[t];p[t]=u+(A+(x[t]-A)*z-u)*g}else for(var t=0;t<o;t++){var A=w[t];p[t]=(A+(x[t]-A)*z)*g}}else for(var t=0;t<o;t++){var A=w[t];p[t]+=(A+(x[t]-A)*z-p[t])*g}}}},e}(d);a.DeformTimeline=k;var l=function(){function d(b){this.frames=a.Utils.newFloatArray(b),this.events=new Array(b)}return d.prototype.getPropertyId=function(){return c.event<<24},d.prototype.getFrameCount=function(){return this.frames.length},d.prototype.setFrame=function(a,b){this.frames[a]=b.time,this.events[a]=b},d.prototype.apply=function(a,c,d,e,f,g,h){if(null!=e){var i=this.frames,j=this.frames.length;if(c>d)this.apply(a,c,Number.MAX_VALUE,e,f,g,h),c=-1;else if(c>=i[j-1])return;if(!(d<i[0])){var k=0;if(c<i[0])k=0;else{k=b.binarySearch(i,c);for(var l=i[k];k>0&&i[k-1]==l;)k--}for(;k<j&&d>=i[k];k++)e.push(this.events[k])}}},d}();a.EventTimeline=l;var m=function(){function d(b){this.frames=a.Utils.newFloatArray(b),this.drawOrders=new Array(b)}return d.prototype.getPropertyId=function(){return c.drawOrder<<24},d.prototype.getFrameCount=function(){return this.frames.length},d.prototype.setFrame=function(a,b,c){this.frames[a]=b,this.drawOrders[a]=c},d.prototype.apply=function(c,d,e,f,g,h,i){var j=c.drawOrder,k=c.slots;if(i&&h)return void a.Utils.arrayCopy(c.slots,0,c.drawOrder,0,c.slots.length);var l=this.frames;if(e<l[0])return void(h&&a.Utils.arrayCopy(c.slots,0,c.drawOrder,0,c.slots.length));var m=0;m=e>=l[l.length-1]?l.length-1:b.binarySearch(l,e)-1;var n=this.drawOrders[m];if(null==n)a.Utils.arrayCopy(k,0,j,0,k.length);else for(var o=0,p=n.length;o<p;o++)j[o]=k[n[o]]},d}();a.DrawOrderTimeline=m;var n=function(d){function e(b){d.call(this,b),this.frames=a.Utils.newFloatArray(b*e.ENTRIES)}return __extends(e,d),e.prototype.getPropertyId=function(){return(c.ikConstraint<<24)+this.ikConstraintIndex},e.prototype.setFrame=function(a,b,c,d){a*=e.ENTRIES,this.frames[a]=b,this.frames[a+e.MIX]=c,this.frames[a+e.BEND_DIRECTION]=d},e.prototype.apply=function(a,c,d,f,g,h,i){var j=this.frames,k=a.ikConstraints[this.ikConstraintIndex];if(d<j[0])return void(h&&(k.mix=k.data.mix,k.bendDirection=k.data.bendDirection));if(d>=j[j.length-e.ENTRIES])return void(h?(k.mix=k.data.mix+(j[j.length+e.PREV_MIX]-k.data.mix)*g,k.bendDirection=i?k.data.bendDirection:j[j.length+e.PREV_BEND_DIRECTION]):(k.mix+=(j[j.length+e.PREV_MIX]-k.mix)*g,i||(k.bendDirection=j[j.length+e.PREV_BEND_DIRECTION])));var l=b.binarySearch(j,d,e.ENTRIES),m=j[l+e.PREV_MIX],n=j[l],o=this.getCurvePercent(l/e.ENTRIES-1,1-(d-n)/(j[l+e.PREV_TIME]-n));h?(k.mix=k.data.mix+(m+(j[l+e.MIX]-m)*o-k.data.mix)*g,k.bendDirection=i?k.data.bendDirection:j[l+e.PREV_BEND_DIRECTION]):(k.mix+=(m+(j[l+e.MIX]-m)*o-k.mix)*g,i||(k.bendDirection=j[l+e.PREV_BEND_DIRECTION]))},e.ENTRIES=3,e.PREV_TIME=-3,e.PREV_MIX=-2,e.PREV_BEND_DIRECTION=-1,e.MIX=1,e.BEND_DIRECTION=2,e}(d);a.IkConstraintTimeline=n;var o=function(d){function e(b){d.call(this,b),this.frames=a.Utils.newFloatArray(b*e.ENTRIES)}return __extends(e,d),e.prototype.getPropertyId=function(){return(c.transformConstraint<<24)+this.transformConstraintIndex},e.prototype.setFrame=function(a,b,c,d,f,g){a*=e.ENTRIES,this.frames[a]=b,this.frames[a+e.ROTATE]=c,this.frames[a+e.TRANSLATE]=d,this.frames[a+e.SCALE]=f,this.frames[a+e.SHEAR]=g},e.prototype.apply=function(a,c,d,f,g,h,i){var j=this.frames,k=a.transformConstraints[this.transformConstraintIndex];if(d<j[0]){if(h){var l=k.data;k.rotateMix=l.rotateMix,k.translateMix=l.rotateMix,k.scaleMix=l.scaleMix,k.shearMix=l.shearMix}}else{var m=0,n=0,o=0,p=0;if(d>=j[j.length-e.ENTRIES]){var q=j.length;m=j[q+e.PREV_ROTATE],n=j[q+e.PREV_TRANSLATE],o=j[q+e.PREV_SCALE],p=j[q+e.PREV_SHEAR]}else{var r=b.binarySearch(j,d,e.ENTRIES);m=j[r+e.PREV_ROTATE],n=j[r+e.PREV_TRANSLATE],o=j[r+e.PREV_SCALE],p=j[r+e.PREV_SHEAR];var s=j[r],t=this.getCurvePercent(r/e.ENTRIES-1,1-(d-s)/(j[r+e.PREV_TIME]-s));m+=(j[r+e.ROTATE]-m)*t,n+=(j[r+e.TRANSLATE]-n)*t,o+=(j[r+e.SCALE]-o)*t,p+=(j[r+e.SHEAR]-p)*t}if(h){var l=k.data;k.rotateMix=l.rotateMix+(m-l.rotateMix)*g,k.translateMix=l.translateMix+(n-l.translateMix)*g,k.scaleMix=l.scaleMix+(o-l.scaleMix)*g,k.shearMix=l.shearMix+(p-l.shearMix)*g}else k.rotateMix+=(m-k.rotateMix)*g,k.translateMix+=(n-k.translateMix)*g,k.scaleMix+=(o-k.scaleMix)*g,k.shearMix+=(p-k.shearMix)*g}},e.ENTRIES=5,e.PREV_TIME=-5,e.PREV_ROTATE=-4,e.PREV_TRANSLATE=-3,e.PREV_SCALE=-2,e.PREV_SHEAR=-1,e.ROTATE=1,e.TRANSLATE=2,e.SCALE=3,e.SHEAR=4,e}(d);a.TransformConstraintTimeline=o;var p=function(d){function e(b){d.call(this,b),this.frames=a.Utils.newFloatArray(b*e.ENTRIES)}return __extends(e,d),e.prototype.getPropertyId=function(){return(c.pathConstraintPosition<<24)+this.pathConstraintIndex},e.prototype.setFrame=function(a,b,c){a*=e.ENTRIES,this.frames[a]=b,this.frames[a+e.VALUE]=c},e.prototype.apply=function(a,c,d,f,g,h,i){var j=this.frames,k=a.pathConstraints[this.pathConstraintIndex];if(d<j[0])return void(h&&(k.position=k.data.position));var l=0;if(d>=j[j.length-e.ENTRIES])l=j[j.length+e.PREV_VALUE];else{var m=b.binarySearch(j,d,e.ENTRIES);l=j[m+e.PREV_VALUE];var n=j[m],o=this.getCurvePercent(m/e.ENTRIES-1,1-(d-n)/(j[m+e.PREV_TIME]-n));l+=(j[m+e.VALUE]-l)*o}h?k.position=k.data.position+(l-k.data.position)*g:k.position+=(l-k.position)*g},e.ENTRIES=2,e.PREV_TIME=-2,e.PREV_VALUE=-1,e.VALUE=1,e}(d);a.PathConstraintPositionTimeline=p;var q=function(a){function d(b){a.call(this,b)}return __extends(d,a),d.prototype.getPropertyId=function(){return(c.pathConstraintSpacing<<24)+this.pathConstraintIndex},d.prototype.apply=function(a,c,e,f,g,h,i){var j=this.frames,k=a.pathConstraints[this.pathConstraintIndex];if(e<j[0])return void(h&&(k.spacing=k.data.spacing));var l=0;if(e>=j[j.length-d.ENTRIES])l=j[j.length+d.PREV_VALUE];else{var m=b.binarySearch(j,e,d.ENTRIES);l=j[m+d.PREV_VALUE];var n=j[m],o=this.getCurvePercent(m/d.ENTRIES-1,1-(e-n)/(j[m+d.PREV_TIME]-n));l+=(j[m+d.VALUE]-l)*o}h?k.spacing=k.data.spacing+(l-k.data.spacing)*g:k.spacing+=(l-k.spacing)*g},d}(p);a.PathConstraintSpacingTimeline=q;var r=function(d){function e(b){d.call(this,b),this.frames=a.Utils.newFloatArray(b*e.ENTRIES)}return __extends(e,d),e.prototype.getPropertyId=function(){return(c.pathConstraintMix<<24)+this.pathConstraintIndex},e.prototype.setFrame=function(a,b,c,d){a*=e.ENTRIES,this.frames[a]=b,this.frames[a+e.ROTATE]=c,this.frames[a+e.TRANSLATE]=d},e.prototype.apply=function(a,c,d,f,g,h,i){var j=this.frames,k=a.pathConstraints[this.pathConstraintIndex];if(d<j[0])return void(h&&(k.rotateMix=k.data.rotateMix,k.translateMix=k.data.translateMix));var l=0,m=0;if(d>=j[j.length-e.ENTRIES])l=j[j.length+e.PREV_ROTATE],m=j[j.length+e.PREV_TRANSLATE];else{var n=b.binarySearch(j,d,e.ENTRIES);l=j[n+e.PREV_ROTATE],m=j[n+e.PREV_TRANSLATE];var o=j[n],p=this.getCurvePercent(n/e.ENTRIES-1,1-(d-o)/(j[n+e.PREV_TIME]-o));l+=(j[n+e.ROTATE]-l)*p,m+=(j[n+e.TRANSLATE]-m)*p}h?(k.rotateMix=k.data.rotateMix+(l-k.data.rotateMix)*g,k.translateMix=k.data.translateMix+(m-k.data.translateMix)*g):(k.rotateMix+=(l-k.rotateMix)*g,k.translateMix+=(m-k.translateMix)*g)},e.ENTRIES=3,e.PREV_TIME=-3,e.PREV_ROTATE=-2,e.PREV_TRANSLATE=-1,e.ROTATE=1,e.TRANSLATE=2,e}(d);a.PathConstraintMixTimeline=r}(b=a.core||(a.core={}))}(b=a.spine||(a.spine={}))}(PIXI||(PIXI={}));var PIXI;!function(a){var b;!function(a){var b;!function(a){var b=function(){function b(b){this.tracks=new Array,this.events=new Array,this.listeners=new Array,this.queue=new d(this),this.propertyIDs=new a.IntSet,this.animationsChanged=!1,this.timeScale=1,this.trackEntryPool=new a.Pool(function(){return new c}),this.data=b}return b.prototype.update=function(a){a*=this.timeScale;for(var b=this.tracks,c=0,d=b.length;c<d;c++){var e=b[c];if(null!=e){e.animationLast=e.nextAnimationLast,e.trackLast=e.nextTrackLast;var f=a*e.timeScale;if(e.delay>0){if(e.delay-=f,e.delay>0)continue;f=-e.delay,e.delay=0}var g=e.next;if(null!=g){var h=e.trackLast-g.delay;if(h>=0){for(g.delay=0,g.trackTime=h+a*g.timeScale,e.trackTime+=f,this.setCurrent(c,g);null!=g.mixingFrom;)g.mixTime+=f,g=g.mixingFrom;continue}this.updateMixingFrom(e,a,!0)}else if(this.updateMixingFrom(e,a,!0),e.trackLast>=e.trackEnd&&null==e.mixingFrom){b[c]=null,this.queue.end(e),this.disposeNext(e);continue}e.trackTime+=f}}this.queue.drain()},b.prototype.updateMixingFrom=function(a,b,c){var d=a.mixingFrom;if(null!=d){if(c&&a.mixTime>=a.mixDuration&&a.mixTime>0){this.queue.end(d);var e=d.mixingFrom;if(a.mixingFrom=e,null==e)return;a.mixTime=d.mixTime,a.mixDuration=d.mixDuration,d=e}d.animationLast=d.nextAnimationLast,d.trackLast=d.nextTrackLast;var f=b*d.timeScale;d.trackTime+=f,a.mixTime+=f,this.updateMixingFrom(d,b,c&&1==d.alpha)}},b.prototype.apply=function(b){if(null==b)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var c=this.events,d=this.tracks,e=0,f=d.length;e<f;e++){var g=d[e];if(!(null==g||g.delay>0)){var h=g.alpha;null!=g.mixingFrom&&(h*=this.applyMixingFrom(g,b));var i=g.animationLast,j=g.getAnimationTime(),k=g.animation.timelines.length,l=g.animation.timelines;if(1==h)for(var m=0;m<k;m++)l[m].apply(b,i,j,c,1,!0,!1);else{var n=0==g.timelinesRotation.length;n&&a.Utils.setArraySize(g.timelinesRotation,k<<1,null);for(var o=g.timelinesRotation,p=g.timelinesFirst,m=0;m<k;m++){var q=l[m];q instanceof a.RotateTimeline?this.applyRotateTimeline(q,b,j,h,p[m],o,m<<1,n):q.apply(b,i,j,c,h,p[m],!1)}}this.queueEvents(g,j),g.nextAnimationLast=j,g.nextTrackLast=g.trackTime}}this.queue.drain()},b.prototype.applyMixingFrom=function(b,c){var d=b.mixingFrom;null!=d.mixingFrom&&this.applyMixingFrom(d,c);var e=0;0==b.mixDuration?e=1:(e=b.mixTime/b.mixDuration,e>1&&(e=1));var f=e<d.eventThreshold?this.events:null,g=e<d.attachmentThreshold,h=e<d.drawOrderThreshold,i=d.animationLast,j=d.getAnimationTime(),k=d.animation.timelines.length,l=d.animation.timelines,m=d.timelinesFirst,n=d.alpha*b.mixAlpha*(1-e),o=0==d.timelinesRotation.length;o&&a.Utils.setArraySize(d.timelinesRotation,k<<1,null);for(var p=d.timelinesRotation,q=0;q<k;q++){var r=l[q],s=m[q];if(r instanceof a.RotateTimeline)this.applyRotateTimeline(r,c,j,n,s,p,q<<1,o);else{if(!s){if(!g&&r instanceof a.AttachmentTimeline)continue;if(!h&&r instanceof a.DrawOrderTimeline)continue}r.apply(c,i,j,f,n,s,!0)}}return this.queueEvents(d,j),d.nextAnimationLast=j,d.nextTrackLast=d.trackTime,e},b.prototype.applyRotateTimeline=function(b,c,d,e,f,g,h,i){if(1==e)return void b.apply(c,0,d,null,1,f,!1);var j=b,k=j.frames,l=c.bones[j.boneIndex];if(d<k[0])return void(f&&(l.rotation=l.data.rotation));var m=0;if(d>=k[k.length-a.RotateTimeline.ENTRIES])m=l.data.rotation+k[k.length+a.RotateTimeline.PREV_ROTATION];else{var n=a.Animation.binarySearch(k,d,a.RotateTimeline.ENTRIES),o=k[n+a.RotateTimeline.PREV_ROTATION],p=k[n],q=j.getCurvePercent((n>>1)-1,1-(d-p)/(k[n+a.RotateTimeline.PREV_TIME]-p));m=k[n+a.RotateTimeline.ROTATION]-o,m-=360*(16384-(16384.499999999996-m/360|0)),m=o+m*q+l.data.rotation,m-=360*(16384-(16384.499999999996-m/360|0))}var r=f?l.data.rotation:l.rotation,s=0,t=m-r;if(0==t)i?(g[h]=0,s=0):s=g[h];else{t-=360*(16384-(16384.499999999996-t/360|0));var u=0,v=0;i?(u=0,v=t):(u=g[h],v=g[h+1]);var w=t>0,x=u>=0;a.MathUtils.signum(v)!=a.MathUtils.signum(t)&&Math.abs(v)<=90&&(Math.abs(u)>180&&(u+=360*a.MathUtils.signum(u)),x=w),s=t+u-u%360,x!=w&&(s+=360*a.MathUtils.signum(u)),g[h]=s}g[h+1]=t,r+=s*e,l.rotation=r-360*(16384-(16384.499999999996-r/360|0))},b.prototype.queueEvents=function(a,b){for(var c=a.animationStart,d=a.animationEnd,e=d-c,f=a.trackLast%e,g=this.events,h=0,i=g.length;h<i;h++){var j=g[h];if(j.time<f)break;j.time>d||this.queue.event(a,j)}for((a.loop?f>a.trackTime%e:b>=d&&a.animationLast<d)&&this.queue.complete(a);h<i;h++){var k=g[h];k.time<c||this.queue.event(a,g[h])}this.events.length=0},b.prototype.clearTracks=function(){this.queue.drainDisabled=!0;for(var a=0,b=this.tracks.length;a<b;a++)this.clearTrack(a);this.tracks.length=0,this.queue.drainDisabled=!1,this.queue.drain()},b.prototype.clearTrack=function(a){if(!(a>=this.tracks.length)){var b=this.tracks[a];if(null!=b){this.queue.end(b),this.disposeNext(b);for(var c=b;;){var d=c.mixingFrom;if(null==d)break;this.queue.end(d),c.mixingFrom=null,c=d}this.tracks[b.trackIndex]=null,this.queue.drain()}}},b.prototype.setCurrent=function(a,b){var c=this.expandToIndex(a);this.tracks[a]=b,null!=c&&(this.queue.interrupt(c),b.mixingFrom=c,b.mixTime=0,null!=c.mixingFrom&&(b.mixAlpha*=Math.min(c.mixTime/c.mixDuration,1))),this.queue.start(b)},b.prototype.setAnimation=function(a,b,c){var d=this.data.skeletonData.findAnimation(b);if(null==d)throw new Error("Animation not found: "+b);return this.setAnimationWith(a,d,c)},b.prototype.setAnimationWith=function(a,b,c){if(null==b)throw new Error("animation cannot be null.");var d=this.expandToIndex(a);null!=d&&(d.nextTrackLast==-1?(this.tracks[a]=null,this.queue.interrupt(d),this.queue.end(d),this.disposeNext(d),d=null):this.disposeNext(d));var e=this.trackEntry(a,b,c,d);return this.setCurrent(a,e),this.queue.drain(),e},b.prototype.addAnimation=function(a,b,c,d){var e=this.data.skeletonData.findAnimation(b);if(null==e)throw new Error("Animation not found: "+b);return this.addAnimationWith(a,e,c,d)},b.prototype.addAnimationWith=function(a,b,c,d){if(null==b)throw new Error("animation cannot be null.");var e=this.expandToIndex(a);if(null!=e)for(;null!=e.next;)e=e.next;var f=this.trackEntry(a,b,c,e);if(null==e)this.setCurrent(a,f),this.queue.drain();else if(e.next=f,d<=0){var g=e.animationEnd-e.animationStart;0!=g?d+=g*(1+(e.trackTime/g|0))-this.data.getMix(e.animation,b):d=0}return f.delay=d,f},b.prototype.setEmptyAnimation=function(a,c){var d=this.setAnimationWith(a,b.emptyAnimation,!1);return d.mixDuration=c,d.trackEnd=c,d},b.prototype.addEmptyAnimation=function(a,c,d){d<=0&&(d-=c);var e=this.addAnimationWith(a,b.emptyAnimation,!1,d);return e.mixDuration=c,e.trackEnd=c,e},b.prototype.setEmptyAnimations=function(a){this.queue.drainDisabled=!0;for(var b=0,c=this.tracks.length;b<c;b++){var d=this.tracks[b];null!=d&&this.setEmptyAnimation(d.trackIndex,a)}this.queue.drainDisabled=!1,this.queue.drain()},b.prototype.expandToIndex=function(b){return b<this.tracks.length?this.tracks[b]:(a.Utils.ensureArrayCapacity(this.tracks,b-this.tracks.length+1,null),this.tracks.length=b+1,null)},b.prototype.trackEntry=function(a,b,c,d){var e=this.trackEntryPool.obtain();return e.trackIndex=a,e.animation=b,e.loop=c,e.eventThreshold=0,e.attachmentThreshold=0,e.drawOrderThreshold=0,e.animationStart=0,e.animationEnd=b.duration,e.animationLast=-1,e.nextAnimationLast=-1,e.delay=0,e.trackTime=0,e.trackLast=-1,e.nextTrackLast=-1,e.trackEnd=c?Number.MAX_VALUE:e.animationEnd,e.timeScale=1,e.alpha=1,e.mixAlpha=1,e.mixTime=0,e.mixDuration=null==d?0:this.data.getMix(d.animation,b),e},b.prototype.disposeNext=function(a){for(var b=a.next;null!=b;)this.queue.dispose(b),b=b.next;a.next=null},b.prototype._animationsChanged=function(){this.animationsChanged=!1;var a=this.propertyIDs,b=0,c=this.tracks.length;for(a.clear();b<c;b++){var d=this.tracks[b];if(null!=d){this.setTimelinesFirst(d),b++;break}}for(;b<c;b++){var d=this.tracks[b];null!=d&&this.checkTimelinesFirst(d)}},b.prototype.setTimelinesFirst=function(b){if(null!=b.mixingFrom)return this.setTimelinesFirst(b.mixingFrom),void this.checkTimelinesUsage(b,b.timelinesFirst);for(var c=this.propertyIDs,d=b.animation.timelines,e=d.length,f=a.Utils.setArraySize(b.timelinesFirst,e,!1),g=0;g<e;g++)c.add(d[g].getPropertyId()),f[g]=!0},b.prototype.checkTimelinesFirst=function(a){null!=a.mixingFrom&&this.checkTimelinesFirst(a.mixingFrom),this.checkTimelinesUsage(a,a.timelinesFirst)},b.prototype.checkTimelinesUsage=function(b,c){for(var d=this.propertyIDs,e=b.animation.timelines,f=e.length,g=a.Utils.setArraySize(c,f),h=0;h<f;h++)g[h]=d.add(e[h].getPropertyId())},b.prototype.getCurrent=function(a){return a>=this.tracks.length?null:this.tracks[a]},b.prototype.addListener=function(a){if(null==a)throw new Error("listener cannot be null.");this.listeners.push(a)},b.prototype.removeListener=function(a){var b=this.listeners.indexOf(a);b>=0&&this.listeners.splice(b,1)},b.prototype.clearListeners=function(){this.listeners.length=0},b.prototype.clearListenerNotifications=function(){this.queue.clear()},b.prototype.setAnimationByName=function(a,c,d){b.deprecatedWarning1||(b.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(a,c,d)},b.prototype.addAnimationByName=function(a,c,d,e){b.deprecatedWarning2||(b.deprecatedWarning2=!0,console.warn("Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(a,c,d,e)},b.prototype.hasAnimationByName=function(a){b.deprecatedWarning3||(b.deprecatedWarning3=!0,console.warn("Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on."));var c=this.data.skeletonData.findAnimation(a);return null!==c},b.emptyAnimation=new a.Animation("<empty>",[],0),b.deprecatedWarning1=!1,b.deprecatedWarning2=!1,b.deprecatedWarning3=!1,b}();a.AnimationState=b;var c=function(){function a(){this.timelinesFirst=new Array,this.timelinesRotation=new Array}return a.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.animation=null,this.listener=null,this.timelinesFirst.length=0,this.timelinesRotation.length=0},a.prototype.getAnimationTime=function(){if(this.loop){var a=this.animationEnd-this.animationStart;return 0==a?this.animationStart:this.trackTime%a+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},a.prototype.setAnimationLast=function(a){this.animationLast=a,this.nextAnimationLast=a},a.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},a.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},Object.defineProperty(a.prototype,"time",{get:function(){return a.deprecatedWarning1||(a.deprecatedWarning1=!0,console.warn("Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime},set:function(b){a.deprecatedWarning1||(a.deprecatedWarning1=!0,console.warn("Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=b},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"endTime",{get:function(){return a.deprecatedWarning2||(a.deprecatedWarning2=!0,console.warn("Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime},set:function(b){a.deprecatedWarning2||(a.deprecatedWarning2=!0,console.warn("Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=b},enumerable:!0,configurable:!0}),a.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},a.deprecatedWarning1=!1,a.deprecatedWarning2=!1,a}();a.TrackEntry=c;var d=function(){function b(a){this.objects=[],this.drainDisabled=!1,this.animState=a}return b.prototype.start=function(a){this.objects.push(e.start),this.objects.push(a),this.animState.animationsChanged=!0},b.prototype.interrupt=function(a){this.objects.push(e.interrupt),this.objects.push(a)},b.prototype.end=function(a){this.objects.push(e.end),this.objects.push(a),this.animState.animationsChanged=!0},b.prototype.dispose=function(a){this.objects.push(e.dispose),this.objects.push(a)},b.prototype.complete=function(a){this.objects.push(e.complete),this.objects.push(a)},b.prototype.event=function(a,b){this.objects.push(e.event),this.objects.push(a),this.objects.push(b)},b.prototype.deprecateStuff=function(){return b.deprecatedWarning1||(b.deprecatedWarning1=!0,console.warn("Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'")),!0},b.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var b=this.objects,c=this.animState.listeners,d=0;d<b.length;d+=2){var f=b[d],g=b[d+1];switch(f){case e.start:null!=g.listener&&g.listener.start&&g.listener.start(g);for(var h=0;h<c.length;h++)c[h].start&&c[h].start(g);g.onStart&&this.deprecateStuff()&&g.onStart(g.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(g.trackIndex);break;case e.interrupt:null!=g.listener&&g.listener.interrupt&&g.listener.interrupt(g);for(var h=0;h<c.length;h++)c[h].interrupt&&c[h].interrupt(g);break;case e.end:null!=g.listener&&g.listener.end&&g.listener.end(g);for(var h=0;h<c.length;h++)c[h].end&&c[h].end(g);g.onEnd&&this.deprecateStuff()&&g.onEnd(g.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(g.trackIndex);case e.dispose:null!=g.listener&&g.listener.dispose&&g.listener.dispose(g);for(var h=0;h<c.length;h++)c[h].dispose&&c[h].dispose(g);this.animState.trackEntryPool.free(g);break;case e.complete:null!=g.listener&&g.listener.complete&&g.listener.complete(g);for(var h=0;h<c.length;h++)c[h].complete&&c[h].complete(g);var i=a.MathUtils.toInt(g.loopsCount());g.onComplete&&this.deprecateStuff()&&g.onComplete(g.trackIndex,i),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(g.trackIndex,i);break;case e.event:var j=b[d++ +2];null!=g.listener&&g.listener.event&&g.listener.event(g,j);for(var h=0;h<c.length;h++)c[h].event&&c[h].event(g,j);g.onEvent&&this.deprecateStuff()&&g.onEvent(g.trackIndex,j),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(g.trackIndex,j)}}this.clear(),this.drainDisabled=!1}},b.prototype.clear=function(){this.objects.length=0},b.deprecatedWarning1=!1,b}();a.EventQueue=d,function(a){a[a.start=0]="start",a[a.interrupt=1]="interrupt",a[a.end=2]="end",a[a.dispose=3]="dispose",a[a.complete=4]="complete",a[a.event=5]="event"}(a.EventType||(a.EventType={}));var e=a.EventType,f=function(){function a(){}return a.prototype.start=function(a){},a.prototype.interrupt=function(a){},a.prototype.end=function(a){},a.prototype.dispose=function(a){},a.prototype.complete=function(a){},a.prototype.event=function(a,b){},a}();a.AnimationStateAdapter2=f}(b=a.core||(a.core={}))}(b=a.spine||(a.spine={}))}(PIXI||(PIXI={}));var PIXI;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(a){if(this.animationToMixTime={},this.defaultMix=0,null==a)throw new Error("skeletonData cannot be null.");this.skeletonData=a;
}return a.prototype.setMix=function(a,b,c){var d=this.skeletonData.findAnimation(a);if(null==d)throw new Error("Animation not found: "+a);var e=this.skeletonData.findAnimation(b);if(null==e)throw new Error("Animation not found: "+b);this.setMixWith(d,e,c)},a.prototype.setMixByName=function(b,c,d){a.deprecatedWarning1||(a.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationStateData.setMixByName is deprecated, please use setMix from now on.")),this.setMix(b,c,d)},a.prototype.setMixWith=function(a,b,c){if(null==a)throw new Error("from cannot be null.");if(null==b)throw new Error("to cannot be null.");var d=a.name+b.name;this.animationToMixTime[d]=c},a.prototype.getMix=function(a,b){var c=a.name+b.name,d=this.animationToMixTime[c];return void 0===d?this.defaultMix:d},a.deprecatedWarning1=!1,a}();a.AnimationStateData=b}(b=a.core||(a.core={}))}(b=a.spine||(a.spine={}))}(PIXI||(PIXI={}));var PIXI;!function(a){var b;!function(a){var b;!function(a){var b=function(){function b(a){this.atlas=a}return b.prototype.newRegionAttachment=function(b,c,d){var e=this.atlas.findRegion(d);if(null==e)throw new Error("Region not found in atlas: "+d+" (region attachment: "+c+")");var f=new a.RegionAttachment(c);return f.region=e,f},b.prototype.newMeshAttachment=function(b,c,d){var e=this.atlas.findRegion(d);if(null==e)throw new Error("Region not found in atlas: "+d+" (mesh attachment: "+c+")");var f=new a.MeshAttachment(c);return f.region=e,f},b.prototype.newBoundingBoxAttachment=function(b,c){return new a.BoundingBoxAttachment(c)},b.prototype.newPathAttachment=function(b,c){return new a.PathAttachment(c)},b}();a.AtlasAttachmentLoader=b}(b=a.core||(a.core={}))}(b=a.spine||(a.spine={}))}(PIXI||(PIXI={}));var PIXI;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(a){if(null==a)throw new Error("name cannot be null.");this.name=a}return a}();a.Attachment=b;var c=function(a){function b(b){a.call(this,b),this.worldVerticesLength=0}return __extends(b,a),b.prototype.computeWorldVertices=function(a,b){this.computeWorldVerticesWith(a,0,this.worldVerticesLength,b,0)},b.prototype.computeWorldVerticesWith=function(a,b,c,d,e){c+=e;var f=a.bone.skeleton,g=a.attachmentVertices,h=this.vertices,i=this.bones;if(null!=i){for(var v=0,w=0,x=0;x<b;x+=2){var y=i[v];v+=y+1,w+=y}var z=f.bones;if(0==g.length)for(var s=e,o=3*w;s<c;s+=2){var A=0,B=0,y=i[v++];for(y+=v;v<y;v++,o+=3){var j=z[i[v]],k=j.matrix,t=h[o],u=h[o+1],C=h[o+2];A+=(t*k.a+u*k.c+k.tx)*C,B+=(t*k.b+u*k.d+k.ty)*C}d[s]=A,d[s+1]=B}else for(var D=g,s=e,o=3*w,E=w<<1;s<c;s+=2){var A=0,B=0,y=i[v++];for(y+=v;v<y;v++,o+=3,E+=2){var j=z[i[v]],k=j.matrix,t=h[o]+D[E],u=h[o+1]+D[E+1],C=h[o+2];A+=(t*k.a+u*k.c+k.tx)*C,B+=(t*k.b+u*k.d+k.ty)*C}d[s]=A,d[s+1]=B}}else{g.length>0&&(h=g);for(var j=a.bone,k=j.matrix,l=k.tx,m=k.ty,n=k.a,o=k.c,p=k.b,q=k.d,r=b,s=e;s<c;r+=2,s+=2){var t=h[r],u=h[r+1];d[s]=t*n+u*o+l,d[s+1]=t*p+u*q+m}}},b.prototype.applyDeform=function(a){return this==a},b}(b);a.VertexAttachment=c}(b=a.core||(a.core={}))}(b=a.spine||(a.spine={}))}(PIXI||(PIXI={}));var PIXI;!function(a){var b;!function(a){var b;!function(a){!function(a){a[a.Region=0]="Region",a[a.BoundingBox=1]="BoundingBox",a[a.Mesh=2]="Mesh",a[a.LinkedMesh=3]="LinkedMesh",a[a.Path=4]="Path"}(a.AttachmentType||(a.AttachmentType={}));a.AttachmentType}(b=a.core||(a.core={}))}(b=a.spine||(a.spine={}))}(PIXI||(PIXI={}));var PIXI;!function(a){var b;!function(a){var b;!function(a){var b=function(b){function c(c){b.call(this,c),this.color=new a.Color(1,1,1,1)}return __extends(c,b),c}(a.VertexAttachment);a.BoundingBoxAttachment=b}(b=a.core||(a.core={}))}(b=a.spine||(a.spine={}))}(PIXI||(PIXI={}));var PIXI;!function(a){var b;!function(a){var b;!function(a){var b=function(b){function c(c){b.call(this,c),this.color=new a.Color(1,1,1,1),this.inheritDeform=!1,this.tempColor=new a.Color(0,0,0,0)}return __extends(c,b),c.prototype.updateWorldVertices=function(a,b){return[]},c.prototype.updateUVs=function(b,c){var d=this.regionUVs,e=d.length;if(c&&c.length==e||(c=a.Utils.newFloatArray(e)),null!=b){for(var f=b.texture,g=f._uvs,h=b.width,i=b.height,j=b.originalWidth,k=b.originalHeight,l=b.offsetX,m=b.pixiOffsetY,n=0;n<e;n+=2){var o=this.regionUVs[n],p=this.regionUVs[n+1];o=(o*j-l)/h,p=(p*k-m)/i,c[n]=(g.x0*(1-o)+g.x1*o)*(1-p)+(g.x3*(1-o)+g.x2*o)*p,c[n+1]=(g.y0*(1-o)+g.y1*o)*(1-p)+(g.y3*(1-o)+g.y2*o)*p}return c}},c.prototype.applyDeform=function(a){return this==a||this.inheritDeform&&this.parentMesh==a},c.prototype.getParentMesh=function(){return this.parentMesh},c.prototype.setParentMesh=function(a){this.parentMesh=a,null!=a&&(this.bones=a.bones,this.vertices=a.vertices,this.regionUVs=a.regionUVs,this.triangles=a.triangles,this.hullLength=a.hullLength)},c}(a.VertexAttachment);a.MeshAttachment=b}(b=a.core||(a.core={}))}(b=a.spine||(a.spine={}))}(PIXI||(PIXI={}));var PIXI;!function(a){var b;!function(a){var b;!function(a){var b=function(b){function c(c){b.call(this,c),this.closed=!1,this.constantSpeed=!1,this.color=new a.Color(1,1,1,1)}return __extends(c,b),c}(a.VertexAttachment);a.PathAttachment=b}(b=a.core||(a.core={}))}(b=a.spine||(a.spine={}))}(PIXI||(PIXI={}));var PIXI;!function(a){var b;!function(a){var b;!function(a){var b=function(b){function c(c){b.call(this,c),this.x=0,this.y=0,this.scaleX=1,this.scaleY=1,this.rotation=0,this.width=0,this.height=0,this.color=new a.Color(1,1,1,1)}return __extends(c,b),c.prototype.updateWorldVertices=function(a,b){return[]},c}(a.Attachment);a.RegionAttachment=b}(b=a.core||(a.core={}))}(b=a.spine||(a.spine={}))}(PIXI||(PIXI={}));var PIXI;!function(a){var b;!function(a){var b;!function(a){!function(a){a[a.Normal=0]="Normal",a[a.Additive=1]="Additive",a[a.Multiply=2]="Multiply",a[a.Screen=3]="Screen"}(a.BlendMode||(a.BlendMode={}));a.BlendMode}(b=a.core||(a.core={}))}(b=a.spine||(a.spine={}))}(PIXI||(PIXI={}));var PIXI;!function(a){var b;!function(b){var c;!function(b){var c=function(){function c(b,c,d){if(this.matrix=new a.Matrix,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.sorted=!1,null==b)throw new Error("data cannot be null.");if(null==c)throw new Error("skeleton cannot be null.");this.data=b,this.skeleton=c,this.parent=d,this.setToSetupPose()}return Object.defineProperty(c.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!0,configurable:!0}),c.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},c.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},c.prototype.updateWorldTransformWith=function(a,d,e,f,g,h,i){this.ax=a,this.ay=d,this.arotation=e,this.ascaleX=f,this.ascaleY=g,this.ashearX=h,this.ashearY=i,this.appliedValid=!0;var j=this.parent,k=this.matrix;if(null==j){var l=e+90+i,m=b.MathUtils.cosDeg(e+h)*f,n=b.MathUtils.cosDeg(l)*g,o=b.MathUtils.sinDeg(e+h)*f,p=b.MathUtils.sinDeg(l)*g,q=this.skeleton;return q.flipX&&(a=-a,m=-m,n=-n),q.flipY!==c.yDown&&(d=-d,o=-o,p=-p),k.a=m,k.c=n,k.b=o,k.d=p,k.tx=a+q.x,void(k.ty=d+q.y)}var r=j.matrix.a,s=j.matrix.c,t=j.matrix.b,u=j.matrix.d;switch(k.tx=r*a+s*d+j.matrix.tx,k.ty=t*a+u*d+j.matrix.ty,this.data.transformMode){case b.TransformMode.Normal:var l=e+90+i,m=b.MathUtils.cosDeg(e+h)*f,n=b.MathUtils.cosDeg(l)*g,o=b.MathUtils.sinDeg(e+h)*f,p=b.MathUtils.sinDeg(l)*g;return k.a=r*m+s*o,k.c=r*n+s*p,k.b=t*m+u*o,void(k.d=t*n+u*p);case b.TransformMode.OnlyTranslation:var l=e+90+i;k.a=b.MathUtils.cosDeg(e+h)*f,k.c=b.MathUtils.cosDeg(l)*g,k.b=b.MathUtils.sinDeg(e+h)*f,k.d=b.MathUtils.sinDeg(l)*g;break;case b.TransformMode.NoRotationOrReflection:var v=r*r+t*t,w=0;v>1e-4?(v=Math.abs(r*u-s*t)/v,s=t*v,u=r*v,w=Math.atan2(t,r)*b.MathUtils.radDeg):(r=0,t=0,w=90-Math.atan2(u,s)*b.MathUtils.radDeg);var x=e+h-w,y=e+i-w+90,m=b.MathUtils.cosDeg(x)*f,n=b.MathUtils.cosDeg(y)*g,o=b.MathUtils.sinDeg(x)*f,p=b.MathUtils.sinDeg(y)*g;k.a=r*m-s*o,k.c=r*n-s*p,k.b=t*m+u*o,k.d=t*n+u*p;break;case b.TransformMode.NoScale:case b.TransformMode.NoScaleOrReflection:var z=b.MathUtils.cosDeg(e),A=b.MathUtils.sinDeg(e),B=r*z+s*A,C=t*z+u*A,v=Math.sqrt(B*B+C*C);v>1e-5&&(v=1/v),B*=v,C*=v,v=Math.sqrt(B*B+C*C);var D=Math.PI/2+Math.atan2(C,B),E=Math.cos(D)*v,F=Math.sin(D)*v,m=b.MathUtils.cosDeg(h)*f,n=b.MathUtils.cosDeg(90+i)*g,o=b.MathUtils.sinDeg(h)*f,p=b.MathUtils.sinDeg(90+i)*g;return k.a=B*m+E*o,k.c=B*n+E*p,k.b=C*m+F*o,k.d=C*n+F*p,void((this.data.transformMode!=b.TransformMode.NoScaleOrReflection?r*u-s*t<0:this.skeleton.flipX!=this.skeleton.flipY!=c.yDown)&&(k.c=-k.c,k.d=-k.d))}this.skeleton.flipX&&(k.a=-k.a,k.c=-k.c),this.skeleton.flipY!=c.yDown&&(k.b=-k.b,k.d=-k.d)},c.prototype.setToSetupPose=function(){var a=this.data;this.x=a.x,this.y=a.y,this.rotation=a.rotation,this.scaleX=a.scaleX,this.scaleY=a.scaleY,this.shearX=a.shearX,this.shearY=a.shearY},c.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*b.MathUtils.radDeg},c.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*b.MathUtils.radDeg},c.prototype.getWorldScaleX=function(){var a=this.matrix;return Math.sqrt(a.a*a.a+a.c*a.c)},c.prototype.getWorldScaleY=function(){var a=this.matrix;return Math.sqrt(a.b*a.b+a.d*a.d)},c.prototype.worldToLocalRotationX=function(){var a=this.parent;if(null==a)return this.arotation;var c=a.matrix,d=this.matrix;return Math.atan2(c.a*d.b-c.b*d.a,c.d*d.a-c.c*d.b)*b.MathUtils.radDeg},c.prototype.worldToLocalRotationY=function(){var a=this.parent;if(null==a)return this.arotation;var c=a.matrix,d=this.matrix;return Math.atan2(c.a*d.d-c.b*d.c,c.d*d.c-c.c*d.d)*b.MathUtils.radDeg},c.prototype.rotateWorld=function(a){var c=this.matrix,d=this.matrix.a,e=c.c,f=c.b,g=c.d,h=b.MathUtils.cosDeg(a),i=b.MathUtils.sinDeg(a);c.a=h*d-i*f,c.c=h*e-i*g,c.b=i*d+h*f,c.d=i*e+h*g,this.appliedValid=!1},c.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var a=this.parent,c=this.matrix;if(null==a)return this.ax=c.tx,this.ay=c.ty,this.arotation=Math.atan2(c.b,c.a)*b.MathUtils.radDeg,this.ascaleX=Math.sqrt(c.a*c.a+c.b*c.b),this.ascaleY=Math.sqrt(c.c*c.c+c.d*c.d),this.ashearX=0,void(this.ashearY=Math.atan2(c.a*c.c+c.b*c.d,c.a*c.d-c.b*c.c)*b.MathUtils.radDeg);var d=a.matrix,e=1/(d.a*d.d-d.b*d.c),f=c.tx-d.tx,g=c.ty-d.ty;this.ax=f*d.d*e-g*d.c*e,this.ay=g*d.a*e-f*d.b*e;var h=e*d.d,i=e*d.a,j=e*d.c,k=e*d.b,l=h*c.a-j*c.b,m=h*c.c-j*c.d,n=i*c.b-k*c.a,o=i*c.d-k*c.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(l*l+n*n),this.ascaleX>1e-4){var p=l*o-m*n;this.ascaleY=p/this.ascaleX,this.ashearY=Math.atan2(l*m+n*o,p)*b.MathUtils.radDeg,this.arotation=Math.atan2(n,l)*b.MathUtils.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(m*m+o*o),this.ashearY=0,this.arotation=90-Math.atan2(o,m)*b.MathUtils.radDeg},c.prototype.worldToLocal=function(a){var b=this.matrix,c=b.a,d=b.c,e=b.b,f=b.d,g=1/(c*f-d*e),h=a.x-b.tx,i=a.y-b.ty;return a.x=h*f*g-i*d*g,a.y=i*c*g-h*e*g,a},c.prototype.localToWorld=function(a){var b=this.matrix,c=a.x,d=a.y;return a.x=c*b.a+d*b.c+b.tx,a.y=c*b.b+d*b.d+b.ty,a},c.yDown=!1,c}();b.Bone=c}(c=b.core||(b.core={}))}(b=a.spine||(a.spine={}))}(PIXI||(PIXI={}));var PIXI;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(a,b,d){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=c.Normal,a<0)throw new Error("index must be >= 0.");if(null==b)throw new Error("name cannot be null.");this.index=a,this.name=b,this.parent=d}return a}();a.BoneData=b,function(a){a[a.Normal=0]="Normal",a[a.OnlyTranslation=1]="OnlyTranslation",a[a.NoRotationOrReflection=2]="NoRotationOrReflection",a[a.NoScale=3]="NoScale",a[a.NoScaleOrReflection=4]="NoScaleOrReflection"}(a.TransformMode||(a.TransformMode={}));var c=a.TransformMode}(b=a.core||(a.core={}))}(b=a.spine||(a.spine={}))}(PIXI||(PIXI={}));var PIXI;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(a,b){if(null==b)throw new Error("data cannot be null.");this.time=a,this.data=b}return a}();a.Event=b}(b=a.core||(a.core={}))}(b=a.spine||(a.spine={}))}(PIXI||(PIXI={}));var PIXI;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(a){this.name=a}return a}();a.EventData=b}(b=a.core||(a.core={}))}(b=a.spine||(a.spine={}))}(PIXI||(PIXI={}));var PIXI;!function(a){var b;!function(a){var b;!function(a){var b=function(){function b(a,b){if(this.mix=1,this.bendDirection=0,this.level=0,null==a)throw new Error("data cannot be null.");if(null==b)throw new Error("skeleton cannot be null.");this.data=a,this.mix=a.mix,this.bendDirection=a.bendDirection,this.bones=new Array;for(var c=0;c<a.bones.length;c++)this.bones.push(b.findBone(a.bones[c].name));this.target=b.findBone(a.target.name)}return b.prototype.getOrder=function(){return this.data.order},b.prototype.apply=function(){this.update()},b.prototype.update=function(){var a=this.target,b=this.bones;switch(b.length){case 1:this.apply1(b[0],a.worldX,a.worldY,this.mix);break;case 2:this.apply2(b[0],b[1],a.worldX,a.worldY,this.bendDirection,this.mix)}},b.prototype.apply1=function(b,c,d,e){b.appliedValid||b.updateAppliedTransform();var f=b.parent.matrix,g=1/(f.a*f.d-f.b*f.c),h=c-f.tx,i=d-f.ty,j=(h*f.d-i*f.c)*g-b.ax,k=(i*f.a-h*f.b)*g-b.ay,l=Math.atan2(k,j)*a.MathUtils.radDeg-b.ashearX-b.arotation;b.ascaleX<0&&(l+=180),l>180?l-=360:l<-180&&(l+=360),b.updateWorldTransformWith(b.ax,b.ay,b.arotation+l*e,b.ascaleX,b.ascaleY,b.ashearX,b.ashearY)},b.prototype.apply2=function(b,c,d,e,f,g){if(0==g)return void c.updateWorldTransform();b.appliedValid||b.updateAppliedTransform(),c.appliedValid||c.updateAppliedTransform();var h=b.ax,i=b.ay,j=b.ascaleX,k=b.ascaleY,l=c.ascaleX,m=0,n=0,o=0;j<0?(j=-j,m=180,o=-1):(m=0,o=1),k<0&&(k=-k,o=-o),l<0?(l=-l,n=180):n=0;var p=b.matrix,q=c.ax,r=0,s=0,t=0,u=p.a,v=p.c,w=p.b,x=p.d,y=Math.abs(j-k)<=1e-4;y?(r=c.ay,s=u*q+v*r+p.tx,t=w*q+x*r+p.ty):(r=0,s=u*q+p.tx,t=w*q+p.ty);var A=(b.parent,b.parent.matrix);u=A.a,v=A.c,w=A.b,x=A.d;var B=1/(u*x-v*w),C=d-A.tx,D=e-A.ty,E=(C*x-D*v)*B-h,F=(D*u-C*w)*B-i;C=s-A.tx,D=t-A.ty;var G=(C*x-D*v)*B-h,H=(D*u-C*w)*B-i,I=Math.sqrt(G*G+H*H),J=c.data.length*l,K=0,L=0;a:if(y){J*=j;var M=(E*E+F*F-I*I-J*J)/(2*I*J);M<-1?M=-1:M>1&&(M=1),L=Math.acos(M)*f,u=I+J*M,v=J*Math.sin(L),K=Math.atan2(F*u-E*v,E*u+F*v)}else{u=j*J,v=k*J;var N=u*u,O=v*v,P=E*E+F*F,Q=Math.atan2(F,E);w=O*I*I+N*P-N*O;var R=-2*O*I,S=O-N;if(x=R*R-4*S*w,x>=0){var T=Math.sqrt(x);R<0&&(T=-T),T=-(R+T)/2;var U=T/S,V=w/T,W=Math.abs(U)<Math.abs(V)?U:V;if(W*W<=P){D=Math.sqrt(P-W*W)*f,K=Q-Math.atan2(D,W),L=Math.atan2(D/k,(W-I)/j);break a}}var X=0,Y=Number.MAX_VALUE,Z=0,$=0,_=0,aa=0,ba=0,ca=0;C=I+u,x=C*C,x>aa&&(_=0,aa=x,ba=C),C=I-u,x=C*C,x<Y&&(X=a.MathUtils.PI,Y=x,Z=C);var da=Math.acos(-u*I/(N-O));C=u*Math.cos(da)+I,D=v*Math.sin(da),x=C*C+D*D,x<Y&&(X=da,Y=x,Z=C,$=D),x>aa&&(_=da,aa=x,ba=C,ca=D),P<=(Y+aa)/2?(K=Q-Math.atan2($*f,Z),L=X*f):(K=Q-Math.atan2(ca*f,ba),L=_*f)}var ea=Math.atan2(r,q)*o,fa=b.arotation;K=(K-ea)*a.MathUtils.radDeg+m-fa,K>180?K-=360:K<-180&&(K+=360),b.updateWorldTransformWith(h,i,fa+K*g,b.ascaleX,b.ascaleY,0,0),fa=c.arotation,L=((L+ea)*a.MathUtils.radDeg-c.ashearX)*o+n-fa,L>180?L-=360:L<-180&&(L+=360),c.updateWorldTransformWith(q,r,fa+L*g,c.ascaleX,c.ascaleY,c.ashearX,c.ashearY)},b}();a.IkConstraint=b}(b=a.core||(a.core={}))}(b=a.spine||(a.spine={}))}(PIXI||(PIXI={}));var PIXI;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(a){this.order=0,this.bones=new Array,this.bendDirection=1,this.mix=1,this.name=a}return a}();a.IkConstraintData=b}(b=a.core||(a.core={}))}(b=a.spine||(a.spine={}))}(PIXI||(PIXI={}));var PIXI;!function(a){var b;!function(a){var b;!function(a){var b=function(){function b(a,b){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,null==a)throw new Error("data cannot be null.");if(null==b)throw new Error("skeleton cannot be null.");this.data=a,this.bones=new Array;for(var c=0,d=a.bones.length;c<d;c++)this.bones.push(b.findBone(a.bones[c].name));this.target=b.findSlot(a.target.name),this.position=a.position,this.spacing=a.spacing,this.rotateMix=a.rotateMix,this.translateMix=a.translateMix}return b.prototype.apply=function(){this.update()},b.prototype.update=function(){var b=this.target.getAttachment();if(b instanceof a.PathAttachment){var c=this.rotateMix,d=this.translateMix,e=d>0,f=c>0;if(e||f){var g=this.data,h=g.spacingMode,i=h==a.SpacingMode.Length,j=g.rotateMode,k=j==a.RotateMode.Tangent,l=j==a.RotateMode.ChainScale,m=this.bones.length,n=k?m:m+1,o=this.bones,p=a.Utils.setArraySize(this.spaces,n),q=null,r=this.spacing;if(l||i){l&&(q=a.Utils.setArraySize(this.lengths,m));for(var s=0,t=n-1;s<t;){var u=o[s],v=u.matrix,w=u.data.length,x=w*v.a,y=w*v.b;w=Math.sqrt(x*x+y*y),l&&(q[s]=w),p[++s]=i?Math.max(0,w+r):r}}else for(var s=1;s<n;s++)p[s]=r;var z=this.computeWorldPositions(b,n,k,g.positionMode==a.PositionMode.Percent,h==a.SpacingMode.Percent),A=z[0],B=z[1],C=g.offsetRotation,D=!1;if(0==C)D=j==a.RotateMode.Chain;else{D=!1;var E=this.target.bone.matrix;C*=E.a*E.d-E.b*E.c>0?a.MathUtils.degRad:-a.MathUtils.degRad}for(var s=0,F=3;s<m;s++,F+=3){var u=o[s],v=u.matrix;v.tx+=(A-v.tx)*d,v.ty+=(B-v.ty)*d;var x=z[F],y=z[F+1],G=x-A,H=y-B;if(l){var I=q[s];if(0!=I){var J=(Math.sqrt(G*G+H*H)/I-1)*c+1;v.a*=J,v.b*=J}}if(A=x,B=y,f){var K=v.a,L=v.c,M=v.b,N=v.d,O=0,P=0,Q=0;if(O=k?z[F-1]:0==p[s+1]?z[F+2]:Math.atan2(H,G),O-=Math.atan2(M,K),D){P=Math.cos(O),Q=Math.sin(O);var R=u.data.length;A+=(R*(P*K-Q*M)-G)*c,B+=(R*(Q*K+P*M)-H)*c}else O+=C;O>a.MathUtils.PI?O-=a.MathUtils.PI2:O<-a.MathUtils.PI&&(O+=a.MathUtils.PI2),O*=c,P=Math.cos(O),Q=Math.sin(O),v.a=P*K-Q*M,v.c=P*L-Q*N,v.b=Q*K+P*M,v.d=Q*L+P*N}u.appliedValid=!1}}}},b.prototype.computeWorldPositions=function(c,d,e,f,g){var h=this.target,i=this.position,j=this.spaces,k=a.Utils.setArraySize(this.positions,3*d+2),l=null,m=c.closed,n=c.worldVerticesLength,o=n/6,p=b.NONE;if(!c.constantSpeed){var q=c.lengths;o-=m?1:2;var r=q[o];if(f&&(i*=r),g)for(var s=0;s<d;s++)j[s]*=r;l=a.Utils.setArraySize(this.world,8);for(var s=0,t=0,u=0;s<d;s++,t+=3){var v=j[s];i+=v;var w=i;if(m)w%=r,w<0&&(w+=r),u=0;else{if(w<0){p!=b.BEFORE&&(p=b.BEFORE,c.computeWorldVerticesWith(h,2,4,l,0)),this.addBeforePosition(w,l,0,k,t);continue}if(w>r){p!=b.AFTER&&(p=b.AFTER,c.computeWorldVerticesWith(h,n-6,4,l,0)),this.addAfterPosition(w-r,l,0,k,t);continue}}for(;;u++){var x=q[u];if(!(w>x)){if(0==u)w/=x;else{var y=q[u-1];w=(w-y)/(x-y)}break}}u!=p&&(p=u,m&&u==o?(c.computeWorldVerticesWith(h,n-4,4,l,0),c.computeWorldVerticesWith(h,0,4,l,4)):c.computeWorldVerticesWith(h,6*u+2,8,l,0)),this.addCurvePosition(w,l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],k,t,e||s>0&&0==v)}return k}m?(n+=2,l=a.Utils.setArraySize(this.world,n),c.computeWorldVerticesWith(h,2,n-4,l,0),c.computeWorldVerticesWith(h,0,2,l,n-4),l[n-2]=l[0],l[n-1]=l[1]):(o--,n-=4,l=a.Utils.setArraySize(this.world,n),c.computeWorldVerticesWith(h,2,n,l,0));for(var z=a.Utils.setArraySize(this.curves,o),A=0,B=l[0],C=l[1],D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=0,O=0,P=0,Q=0,s=0,R=2;s<o;s++,R+=6)D=l[R],E=l[R+1],F=l[R+2],G=l[R+3],H=l[R+4],I=l[R+5],J=.1875*(B-2*D+F),K=.1875*(C-2*E+G),L=.09375*(3*(D-F)-B+H),M=.09375*(3*(E-G)-C+I),N=2*J+L,O=2*K+M,P=.75*(D-B)+J+.16666667*L,Q=.75*(E-C)+K+.16666667*M,A+=Math.sqrt(P*P+Q*Q),P+=N,Q+=O,N+=L,O+=M,A+=Math.sqrt(P*P+Q*Q),P+=N,Q+=O,A+=Math.sqrt(P*P+Q*Q),P+=N+L,Q+=O+M,A+=Math.sqrt(P*P+Q*Q),z[s]=A,B=H,C=I;if(f&&(i*=A),g)for(var s=0;s<d;s++)j[s]*=A;for(var S=this.segments,T=0,s=0,t=0,u=0,U=0;s<d;s++,t+=3){var v=j[s];i+=v;var w=i;if(m)w%=A,w<0&&(w+=A),u=0;else{if(w<0){this.addBeforePosition(w,l,0,k,t);continue}if(w>A){this.addAfterPosition(w-A,l,n-4,k,t);continue}}for(;;u++){var V=z[u];if(!(w>V)){if(0==u)w/=V;else{var y=z[u-1];w=(w-y)/(V-y)}break}}if(u!=p){p=u;var W=6*u;for(B=l[W],C=l[W+1],D=l[W+2],E=l[W+3],F=l[W+4],G=l[W+5],H=l[W+6],I=l[W+7],J=.03*(B-2*D+F),K=.03*(C-2*E+G),L=.006*(3*(D-F)-B+H),M=.006*(3*(E-G)-C+I),N=2*J+L,O=2*K+M,P=.3*(D-B)+J+.16666667*L,Q=.3*(E-C)+K+.16666667*M,T=Math.sqrt(P*P+Q*Q),S[0]=T,W=1;W<8;W++)P+=N,Q+=O,N+=L,O+=M,T+=Math.sqrt(P*P+Q*Q),S[W]=T;P+=N,Q+=O,T+=Math.sqrt(P*P+Q*Q),S[8]=T,P+=N+L,Q+=O+M,T+=Math.sqrt(P*P+Q*Q),S[9]=T,U=0}for(w*=T;;U++){var X=S[U];if(!(w>X)){if(0==U)w/=X;else{var y=S[U-1];w=U+(w-y)/(X-y)}break}}this.addCurvePosition(.1*w,B,C,D,E,F,G,H,I,k,t,e||s>0&&0==v)}return k},b.prototype.addBeforePosition=function(a,b,c,d,e){var f=b[c],g=b[c+1],h=b[c+2]-f,i=b[c+3]-g,j=Math.atan2(i,h);d[e]=f+a*Math.cos(j),d[e+1]=g+a*Math.sin(j),d[e+2]=j},b.prototype.addAfterPosition=function(a,b,c,d,e){var f=b[c+2],g=b[c+3],h=f-b[c],i=g-b[c+1],j=Math.atan2(i,h);d[e]=f+a*Math.cos(j),d[e+1]=g+a*Math.sin(j),d[e+2]=j},b.prototype.addCurvePosition=function(a,b,c,d,e,f,g,h,i,j,k,l){(0==a||isNaN(a))&&(a=1e-4);var m=a*a,n=m*a,o=1-a,p=o*o,q=p*o,r=o*a,s=3*r,t=o*s,u=s*a,v=b*q+d*t+f*u+h*n,w=c*q+e*t+g*u+i*n;j[k]=v,j[k+1]=w,l&&(j[k+2]=Math.atan2(w-(c*p+e*r*2+g*m),v-(b*p+d*r*2+f*m)))},b.prototype.getOrder=function(){return this.data.order},b.NONE=-1,b.BEFORE=-2,b.AFTER=-3,b}();a.PathConstraint=b}(b=a.core||(a.core={}))}(b=a.spine||(a.spine={}))}(PIXI||(PIXI={}));var PIXI;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(a){this.order=0,this.bones=new Array,this.name=a}return a}();a.PathConstraintData=b,function(a){a[a.Fixed=0]="Fixed",a[a.Percent=1]="Percent"}(a.PositionMode||(a.PositionMode={}));a.PositionMode;!function(a){a[a.Length=0]="Length",a[a.Fixed=1]="Fixed",a[a.Percent=2]="Percent"}(a.SpacingMode||(a.SpacingMode={}));a.SpacingMode;!function(a){a[a.Tangent=0]="Tangent",a[a.Chain=1]="Chain",a[a.ChainScale=2]="ChainScale"}(a.RotateMode||(a.RotateMode={}));a.RotateMode}(b=a.core||(a.core={}))}(b=a.spine||(a.spine={}))}(PIXI||(PIXI={}));var PIXI;!function(a){var b;!function(a){var b;!function(a){var b=function(){function b(b){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.flipX=!1,this.flipY=!1,this.x=0,this.y=0,null==b)throw new Error("data cannot be null.");this.data=b,this.bones=new Array;for(var c=0;c<b.bones.length;c++){var d=b.bones[c],e=void 0;if(null==d.parent)e=new a.Bone(d,this,null);else{var f=this.bones[d.parent.index];e=new a.Bone(d,this,f),f.children.push(e)}this.bones.push(e)}this.slots=new Array,this.drawOrder=new Array;for(var c=0;c<b.slots.length;c++){var g=b.slots[c],e=this.bones[g.boneData.index],h=new a.Slot(g,e);this.slots.push(h),this.drawOrder.push(h)}this.ikConstraints=new Array;for(var c=0;c<b.ikConstraints.length;c++){var i=b.ikConstraints[c];this.ikConstraints.push(new a.IkConstraint(i,this))}this.transformConstraints=new Array;for(var c=0;c<b.transformConstraints.length;c++){var j=b.transformConstraints[c];this.transformConstraints.push(new a.TransformConstraint(j,this))}this.pathConstraints=new Array;for(var c=0;c<b.pathConstraints.length;c++){var k=b.pathConstraints[c];this.pathConstraints.push(new a.PathConstraint(k,this))}this.color=new a.Color(1,1,1,1),this.updateCache()}return b.prototype.updateCache=function(){var a=this._updateCache;a.length=0;for(var b=this.bones,c=0,d=b.length;c<d;c++)b[c].sorted=!1;var e=this.ikConstraints,f=this.transformConstraints,g=this.pathConstraints,h=e.length,i=f.length,j=g.length,k=h+i+j;a:for(var c=0;c<k;c++){for(var l=0;l<h;l++){var m=e[l];if(m.data.order==c){this.sortIkConstraint(m);continue a}}for(var l=0;l<i;l++){var m=f[l];if(m.data.order==c){this.sortTransformConstraint(m);continue a}}for(var l=0;l<j;l++){var m=g[l];if(m.data.order==c){this.sortPathConstraint(m);continue a}}}for(var c=0,d=b.length;c<d;c++)this.sortBone(b[c])},b.prototype.sortIkConstraint=function(a){var b=a.target;this.sortBone(b);var c=a.bones,d=c[0];if(this.sortBone(d),c.length>1){var e=c[c.length-1];this._updateCache.indexOf(e)>-1||this.updateCacheReset.push(e)}this._updateCache.push(a),this.sortReset(d.children),c[c.length-1].sorted=!0},b.prototype.sortPathConstraint=function(b){var c=b.target,d=c.data.index,e=c.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,d,e),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,d,e);for(var f=0,g=this.data.skins.length;f<g;f++)this.sortPathConstraintAttachment(this.data.skins[f],d,e);var h=c.getAttachment();h instanceof a.PathAttachment&&this.sortPathConstraintAttachmentWith(h,e);for(var i=b.bones,j=i.length,f=0;f<j;f++)this.sortBone(i[f]);this._updateCache.push(b);for(var f=0;f<j;f++)this.sortReset(i[f].children);for(var f=0;f<j;f++)i[f].sorted=!0},b.prototype.sortTransformConstraint=function(a){this.sortBone(a.target);for(var b=a.bones,c=b.length,d=0;d<c;d++)this.sortBone(b[d]);this._updateCache.push(a);for(var d=0;d<c;d++)this.sortReset(b[d].children);for(var d=0;d<c;d++)b[d].sorted=!0},b.prototype.sortPathConstraintAttachment=function(a,b,c){var d=a.attachments[b];if(d)for(var e in d)this.sortPathConstraintAttachmentWith(d[e],c)},b.prototype.sortPathConstraintAttachmentWith=function(b,c){if(b instanceof a.PathAttachment){var d=b.bones;if(null==d)this.sortBone(c);else for(var e=this.bones,f=0;f<d.length;)for(var g=d[f++],h=f+g;f<h;f++){var i=d[f];this.sortBone(e[i])}}},b.prototype.sortBone=function(a){if(!a.sorted){var b=a.parent;null!=b&&this.sortBone(b),a.sorted=!0,this._updateCache.push(a)}},b.prototype.sortReset=function(a){for(var b=0,c=a.length;b<c;b++){var d=a[b];d.sorted&&this.sortReset(d.children),d.sorted=!1}},b.prototype.updateWorldTransform=function(){for(var a=this.updateCacheReset,b=0,c=a.length;b<c;b++){var d=a[b];d.ax=d.x,d.ay=d.y,d.arotation=d.rotation,d.ascaleX=d.scaleX,d.ascaleY=d.scaleY,d.ashearX=d.shearX,d.ashearY=d.shearY,d.appliedValid=!0}for(var e=this._updateCache,b=0,c=e.length;b<c;b++)e[b].update()},b.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},b.prototype.setBonesToSetupPose=function(){for(var a=this.bones,b=0,c=a.length;b<c;b++)a[b].setToSetupPose();for(var d=this.ikConstraints,b=0,c=d.length;b<c;b++){var e=d[b];e.bendDirection=e.data.bendDirection,e.mix=e.data.mix}for(var f=this.transformConstraints,b=0,c=f.length;b<c;b++){var e=f[b],g=e.data;e.rotateMix=g.rotateMix,e.translateMix=g.translateMix,e.scaleMix=g.scaleMix,e.shearMix=g.shearMix}for(var h=this.pathConstraints,b=0,c=h.length;b<c;b++){var e=h[b],g=e.data;e.position=g.position,e.spacing=g.spacing,e.rotateMix=g.rotateMix,e.translateMix=g.translateMix}},b.prototype.setSlotsToSetupPose=function(){var b=this.slots;a.Utils.arrayCopy(b,0,this.drawOrder,0,b.length);for(var c=0,d=b.length;c<d;c++)b[c].setToSetupPose()},b.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},b.prototype.findBone=function(a){if(null==a)throw new Error("boneName cannot be null.");for(var b=this.bones,c=0,d=b.length;c<d;c++){var e=b[c];if(e.data.name==a)return e}return null},b.prototype.findBoneIndex=function(a){if(null==a)throw new Error("boneName cannot be null.");for(var b=this.bones,c=0,d=b.length;c<d;c++)if(b[c].data.name==a)return c;return-1},b.prototype.findSlot=function(a){if(null==a)throw new Error("slotName cannot be null.");for(var b=this.slots,c=0,d=b.length;c<d;c++){var e=b[c];if(e.data.name==a)return e}return null},b.prototype.findSlotIndex=function(a){if(null==a)throw new Error("slotName cannot be null.");for(var b=this.slots,c=0,d=b.length;c<d;c++)if(b[c].data.name==a)return c;return-1},b.prototype.setSkinByName=function(a){var b=this.data.findSkin(a);if(null==b)throw new Error("Skin not found: "+a);this.setSkin(b)},b.prototype.setSkin=function(a){if(null!=a)if(null!=this.skin)a.attachAll(this,this.skin);else for(var b=this.slots,c=0,d=b.length;c<d;c++){var e=b[c],f=e.data.attachmentName;if(null!=f){var g=a.getAttachment(c,f);null!=g&&e.setAttachment(g)}}this.skin=a},b.prototype.getAttachmentByName=function(a,b){return this.getAttachment(this.data.findSlotIndex(a),b)},b.prototype.getAttachment=function(a,b){if(null==b)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var c=this.skin.getAttachment(a,b);if(null!=c)return c}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(a,b):null},b.prototype.setAttachment=function(a,b){if(null==a)throw new Error("slotName cannot be null.");for(var c=this.slots,d=0,e=c.length;d<e;d++){var f=c[d];if(f.data.name==a){var g=null;if(null!=b&&(g=this.getAttachment(d,b),null==g))throw new Error("Attachment not found: "+b+", for slot: "+a);return void f.setAttachment(g)}}throw new Error("Slot not found: "+a)},b.prototype.findIkConstraint=function(a){if(null==a)throw new Error("constraintName cannot be null.");for(var b=this.ikConstraints,c=0,d=b.length;c<d;c++){var e=b[c];if(e.data.name==a)return e}return null},b.prototype.findTransformConstraint=function(a){if(null==a)throw new Error("constraintName cannot be null.");for(var b=this.transformConstraints,c=0,d=b.length;c<d;c++){var e=b[c];if(e.data.name==a)return e}return null},b.prototype.findPathConstraint=function(a){if(null==a)throw new Error("constraintName cannot be null.");for(var b=this.pathConstraints,c=0,d=b.length;c<d;c++){var e=b[c];if(e.data.name==a)return e}return null},b.prototype.getBounds=function(b,c){if(null==b)throw new Error("offset cannot be null.");if(null==c)throw new Error("size cannot be null.");for(var d=this.drawOrder,e=Number.POSITIVE_INFINITY,f=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY,i=0,j=d.length;i<j;i++){var k=d[i],l=null,m=k.getAttachment();if(m instanceof a.RegionAttachment?l=m.updateWorldVertices(k,!1):m instanceof a.MeshAttachment&&(l=m.updateWorldVertices(k,!0)),null!=l)for(var n=0,o=l.length;n<o;n+=8){var p=l[n],q=l[n+1];e=Math.min(e,p),f=Math.min(f,q),g=Math.max(g,p),h=Math.max(h,q)}}b.set(e,f),c.set(g-e,h-f)},b.prototype.update=function(a){this.time+=a},b}();a.Skeleton=b}(b=a.core||(a.core={}))}(b=a.spine||(a.spine={}))}(PIXI||(PIXI={}));var PIXI;!function(a){var b;!function(a){var b;!function(a){var b=function(){function b(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new a.Pool(function(){return a.Utils.newFloatArray(16)})}return b.prototype.update=function(b,c){if(null==b)throw new Error("skeleton cannot be null.");var d=this.boundingBoxes,e=this.polygons,f=this.polygonPool,g=b.slots,h=g.length;d.length=0,f.freeAll(e),e.length=0;for(var i=0;i<h;i++){var j=g[i],k=j.getAttachment();if(k instanceof a.BoundingBoxAttachment){var l=k;d.push(l);var m=f.obtain();m.length!=l.worldVerticesLength&&(m=a.Utils.newFloatArray(l.worldVerticesLength)),e.push(m),l.computeWorldVertices(j,m)}}c&&this.aabbCompute()},b.prototype.aabbCompute=function(){for(var a=Number.POSITIVE_INFINITY,b=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,d=Number.NEGATIVE_INFINITY,e=this.polygons,f=0,g=e.length;f<g;f++)for(var h=e[f],i=h,j=0,k=h.length;j<k;j+=2){var l=i[j],m=i[j+1];a=Math.min(a,l),b=Math.min(b,m),c=Math.max(c,l),d=Math.max(d,m)}this.minX=a,this.minY=b,this.maxX=c,this.maxY=d},b.prototype.aabbContainsPoint=function(a,b){return a>=this.minX&&a<=this.maxX&&b>=this.minY&&b<=this.maxY},b.prototype.aabbIntersectsSegment=function(a,b,c,d){var e=this.minX,f=this.minY,g=this.maxX,h=this.maxY;if(a<=e&&c<=e||b<=f&&d<=f||a>=g&&c>=g||b>=h&&d>=h)return!1;var i=(d-b)/(c-a),j=i*(e-a)+b;if(j>f&&j<h)return!0;if(j=i*(g-a)+b,j>f&&j<h)return!0;var k=(f-b)/i+a;return k>e&&k<g||(k=(h-b)/i+a,k>e&&k<g)},b.prototype.aabbIntersectsSkeleton=function(a){return this.minX<a.maxX&&this.maxX>a.minX&&this.minY<a.maxY&&this.maxY>a.minY},b.prototype.containsPoint=function(a,b){for(var c=this.polygons,d=0,e=c.length;d<e;d++)if(this.containsPointPolygon(c[d],a,b))return this.boundingBoxes[d];
return null},b.prototype.containsPointPolygon=function(a,b,c){for(var d=a,e=a.length,f=e-2,g=!1,h=0;h<e;h+=2){var i=d[h+1],j=d[f+1];if(i<c&&j>=c||j<c&&i>=c){var k=d[h];k+(c-i)/(j-i)*(d[f]-k)<b&&(g=!g)}f=h}return g},b.prototype.intersectsSegment=function(a,b,c,d){for(var e=this.polygons,f=0,g=e.length;f<g;f++)if(this.intersectsSegmentPolygon(e[f],a,b,c,d))return this.boundingBoxes[f];return null},b.prototype.intersectsSegmentPolygon=function(a,b,c,d,e){for(var f=a,g=a.length,h=b-d,i=c-e,j=b*e-c*d,k=f[g-2],l=f[g-1],m=0;m<g;m+=2){var n=f[m],o=f[m+1],p=k*o-l*n,q=k-n,r=l-o,s=h*r-i*q,t=(j*q-h*p)/s;if((t>=k&&t<=n||t>=n&&t<=k)&&(t>=b&&t<=d||t>=d&&t<=b)){var u=(j*r-i*p)/s;if((u>=l&&u<=o||u>=o&&u<=l)&&(u>=c&&u<=e||u>=e&&u<=c))return!0}k=n,l=o}return!1},b.prototype.getPolygon=function(a){if(null==a)throw new Error("boundingBox cannot be null.");var b=this.boundingBoxes.indexOf(a);return b==-1?null:this.polygons[b]},b.prototype.getWidth=function(){return this.maxX-this.minX},b.prototype.getHeight=function(){return this.maxY-this.minY},b}();a.SkeletonBounds=b}(b=a.core||(a.core={}))}(b=a.spine||(a.spine={}))}(PIXI||(PIXI={}));var PIXI;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return a.prototype.findBone=function(a){if(null==a)throw new Error("boneName cannot be null.");for(var b=this.bones,c=0,d=b.length;c<d;c++){var e=b[c];if(e.name==a)return e}return null},a.prototype.findBoneIndex=function(a){if(null==a)throw new Error("boneName cannot be null.");for(var b=this.bones,c=0,d=b.length;c<d;c++)if(b[c].name==a)return c;return-1},a.prototype.findSlot=function(a){if(null==a)throw new Error("slotName cannot be null.");for(var b=this.slots,c=0,d=b.length;c<d;c++){var e=b[c];if(e.name==a)return e}return null},a.prototype.findSlotIndex=function(a){if(null==a)throw new Error("slotName cannot be null.");for(var b=this.slots,c=0,d=b.length;c<d;c++)if(b[c].name==a)return c;return-1},a.prototype.findSkin=function(a){if(null==a)throw new Error("skinName cannot be null.");for(var b=this.skins,c=0,d=b.length;c<d;c++){var e=b[c];if(e.name==a)return e}return null},a.prototype.findEvent=function(a){if(null==a)throw new Error("eventDataName cannot be null.");for(var b=this.events,c=0,d=b.length;c<d;c++){var e=b[c];if(e.name==a)return e}return null},a.prototype.findAnimation=function(a){if(null==a)throw new Error("animationName cannot be null.");for(var b=this.animations,c=0,d=b.length;c<d;c++){var e=b[c];if(e.name==a)return e}return null},a.prototype.findIkConstraint=function(a){if(null==a)throw new Error("constraintName cannot be null.");for(var b=this.ikConstraints,c=0,d=b.length;c<d;c++){var e=b[c];if(e.name==a)return e}return null},a.prototype.findTransformConstraint=function(a){if(null==a)throw new Error("constraintName cannot be null.");for(var b=this.transformConstraints,c=0,d=b.length;c<d;c++){var e=b[c];if(e.name==a)return e}return null},a.prototype.findPathConstraint=function(a){if(null==a)throw new Error("constraintName cannot be null.");for(var b=this.pathConstraints,c=0,d=b.length;c<d;c++){var e=b[c];if(e.name==a)return e}return null},a.prototype.findPathConstraintIndex=function(a){if(null==a)throw new Error("pathConstraintName cannot be null.");for(var b=this.pathConstraints,c=0,d=b.length;c<d;c++)if(b[c].name==a)return c;return-1},a}();a.SkeletonData=b}(b=a.core||(a.core={}))}(b=a.spine||(a.spine={}))}(PIXI||(PIXI={}));var PIXI;!function(a){var b;!function(b){var c;!function(b){var c=function(){function c(a){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=a}return c.prototype.readSkeletonData=function(a){var d=this.scale,e=new b.SkeletonData,f="string"==typeof a?JSON.parse(a):a,g=f.skeleton;if(null!=g&&(e.hash=g.hash,e.version=g.spine,e.width=g.width,e.height=g.height,e.fps=g.fps,e.imagesPath=g.images),f.bones)for(var h=0;h<f.bones.length;h++){var i=f.bones[h],j=null,k=this.getValue(i,"parent",null);if(null!=k&&(j=e.findBone(k),null==j))throw new Error("Parent bone not found: "+k);var l=new b.BoneData(e.bones.length,i.name,j);l.length=this.getValue(i,"length",0)*d,l.x=this.getValue(i,"x",0)*d,l.y=this.getValue(i,"y",0)*d,l.rotation=this.getValue(i,"rotation",0),l.scaleX=this.getValue(i,"scaleX",1),l.scaleY=this.getValue(i,"scaleY",1),l.shearX=this.getValue(i,"shearX",0),l.shearY=this.getValue(i,"shearY",0),i.hasOwnProperty("inheritScale")||i.hasOwnProperty("inheritRotation")?l.transformMode=c.transformModeLegacy(this.getValue(i,"inheritRotation",!0),this.getValue(i,"inheritScale",!0)):l.transformMode=c.transformModeFromString(this.getValue(i,"transform","normal")),e.bones.push(l)}if(f.slots)for(var h=0;h<f.slots.length;h++){var m=f.slots[h],n=m.name,o=m.bone,p=e.findBone(o);if(null==p)throw new Error("Slot bone not found: "+o);var l=new b.SlotData(e.slots.length,n,p),q=this.getValue(m,"color",null);null!=q&&l.color.setFromString(q),l.attachmentName=this.getValue(m,"attachment",null),l.blendMode=c.blendModeFromString(this.getValue(m,"blend","normal")),e.slots.push(l)}if(f.ik)for(var h=0;h<f.ik.length;h++){var r=f.ik[h],l=new b.IkConstraintData(r.name);l.order=this.getValue(r,"order",0);for(var s=0;s<r.bones.length;s++){var o=r.bones[s],t=e.findBone(o);if(null==t)throw new Error("IK bone not found: "+o);l.bones.push(t)}var u=r.target;if(l.target=e.findBone(u),null==l.target)throw new Error("IK target bone not found: "+u);l.bendDirection=this.getValue(r,"bendPositive",!0)?1:-1,l.mix=this.getValue(r,"mix",1),e.ikConstraints.push(l)}if(f.transform)for(var h=0;h<f.transform.length;h++){var r=f.transform[h],l=new b.TransformConstraintData(r.name);l.order=this.getValue(r,"order",0);for(var s=0;s<r.bones.length;s++){var o=r.bones[s],t=e.findBone(o);if(null==t)throw new Error("Transform constraint bone not found: "+o);l.bones.push(t)}var u=r.target;if(l.target=e.findBone(u),null==l.target)throw new Error("Transform constraint target bone not found: "+u);l.offsetRotation=this.getValue(r,"rotation",0),l.offsetX=this.getValue(r,"x",0)*d,l.offsetY=this.getValue(r,"y",0)*d,l.offsetScaleX=this.getValue(r,"scaleX",0),l.offsetScaleY=this.getValue(r,"scaleY",0),l.offsetShearY=this.getValue(r,"shearY",0),l.rotateMix=this.getValue(r,"rotateMix",1),l.translateMix=this.getValue(r,"translateMix",1),l.scaleMix=this.getValue(r,"scaleMix",1),l.shearMix=this.getValue(r,"shearMix",1),e.transformConstraints.push(l)}if(f.path)for(var h=0;h<f.path.length;h++){var r=f.path[h],l=new b.PathConstraintData(r.name);l.order=this.getValue(r,"order",0);for(var s=0;s<r.bones.length;s++){var o=r.bones[s],t=e.findBone(o);if(null==t)throw new Error("Transform constraint bone not found: "+o);l.bones.push(t)}var u=r.target;if(l.target=e.findSlot(u),null==l.target)throw new Error("Path target slot not found: "+u);l.positionMode=c.positionModeFromString(this.getValue(r,"positionMode","percent")),l.spacingMode=c.spacingModeFromString(this.getValue(r,"spacingMode","length")),l.rotateMode=c.rotateModeFromString(this.getValue(r,"rotateMode","tangent")),l.offsetRotation=this.getValue(r,"rotation",0),l.position=this.getValue(r,"position",0),l.positionMode==b.PositionMode.Fixed&&(l.position*=d),l.spacing=this.getValue(r,"spacing",0),l.spacingMode!=b.SpacingMode.Length&&l.spacingMode!=b.SpacingMode.Fixed||(l.spacing*=d),l.rotateMix=this.getValue(r,"rotateMix",1),l.translateMix=this.getValue(r,"translateMix",1),e.pathConstraints.push(l)}if(f.skins)for(var v in f.skins){var w=f.skins[v],x=new b.Skin(v);for(var n in w){var y=e.findSlotIndex(n);if(y==-1)throw new Error("Slot not found: "+n);var m=w[n];for(var z in m){var A=this.readAttachment(m[z],x,y,z);null!=A&&x.addAttachment(y,z,A)}}e.skins.push(x),"default"==x.name&&(e.defaultSkin=x)}for(var h=0,B=this.linkedMeshes.length;h<B;h++){var C=this.linkedMeshes[h],x=null==C.skin?e.defaultSkin:e.findSkin(C.skin);if(null==x)throw new Error("Skin not found: "+C.skin);var D=x.getAttachment(C.slotIndex,C.parent);if(null==D)throw new Error("Parent mesh not found: "+C.parent);C.mesh.setParentMesh(D)}if(this.linkedMeshes.length=0,f.events)for(var E in f.events){var F=f.events[E],l=new b.EventData(E);l.intValue=this.getValue(F,"int",0),l.floatValue=this.getValue(F,"float",0),l.stringValue=this.getValue(F,"string",""),e.events.push(l)}if(f.animations)for(var G in f.animations){var H=f.animations[G];this.readAnimation(H,G,e)}return e},c.prototype.readAttachment=function(a,c,e,f){var g=this.scale;f=this.getValue(a,"name",f);var h=this.getValue(a,"type","region");switch(h){case"region":var i=this.getValue(a,"path",f),j=this.attachmentLoader.newRegionAttachment(c,f,i);if(null==j)return null;j.path=i,j.x=this.getValue(a,"x",0)*g,j.y=this.getValue(a,"y",0)*g,j.scaleX=this.getValue(a,"scaleX",1),j.scaleY=this.getValue(a,"scaleY",1),j.rotation=this.getValue(a,"rotation",0),j.width=a.width*g,j.height=a.height*g;var k=this.getValue(a,"color",null);return null!=k&&j.color.setFromString(k),j;case"boundingbox":var l=this.attachmentLoader.newBoundingBoxAttachment(c,f);if(null==l)return null;this.readVertices(a,l,a.vertexCount<<1);var k=this.getValue(a,"color",null);return null!=k&&l.color.setFromString(k),l;case"weightedmesh":case"skinnedmesh":case"mesh":case"linkedmesh":var i=this.getValue(a,"path",f),m=this.attachmentLoader.newMeshAttachment(c,f,i);if(null==m)return null;m.path=i;var k=this.getValue(a,"color",null);null!=k&&m.color.setFromString(k);var n=this.getValue(a,"parent",null);if(null!=n)return m.inheritDeform=this.getValue(a,"deform",!0),this.linkedMeshes.push(new d(m,this.getValue(a,"skin",null),e,n)),m;var o=a.uvs;return this.readVertices(a,m,o.length),m.triangles=a.triangles,m.regionUVs=o,m.hullLength=2*this.getValue(a,"hull",0),m;case"path":var i=this.attachmentLoader.newPathAttachment(c,f);if(null==i)return null;i.closed=this.getValue(a,"closed",!1),i.constantSpeed=this.getValue(a,"constantSpeed",!0);var p=a.vertexCount;this.readVertices(a,i,p<<1);for(var q=b.Utils.newArray(p/3,0),r=0;r<a.lengths.length;r++)q[r++]=a.lengths[r]*g;i.lengths=q;var k=this.getValue(a,"color",null);return null!=k&&i.color.setFromString(k),i}return null},c.prototype.readVertices=function(a,c,d){var e=this.scale;c.worldVerticesLength=d;var f=a.vertices;if(d==f.length){if(1!=e)for(var g=0,h=f.length;g<h;g++)f[g]*=e;return void(c.vertices=b.Utils.toFloatArray(f))}for(var i=new Array,j=new Array,g=0,h=f.length;g<h;){var k=f[g++];j.push(k);for(var l=g+4*k;g<l;g+=4)j.push(f[g]),i.push(f[g+1]*e),i.push(f[g+2]*e),i.push(f[g+3])}c.bones=j,c.vertices=b.Utils.toFloatArray(i)},c.prototype.readAnimation=function(a,c,d){var e=this.scale,f=new Array,g=0;if(a.slots)for(var h in a.slots){var i=a.slots[h],j=d.findSlotIndex(h);if(j==-1)throw new Error("Slot not found: "+h);for(var k in i){var l=i[k];if("color"==k){var m=new b.ColorTimeline(l.length);m.slotIndex=j;for(var n=0,o=0;o<l.length;o++){var p=l[o],q=new b.Color;q.setFromString(p.color),m.setFrame(n,p.time,q.r,q.g,q.b,q.a),this.readCurve(p,m,n),n++}f.push(m),g=Math.max(g,m.frames[(m.getFrameCount()-1)*b.ColorTimeline.ENTRIES])}else{if(!(k="attachment"))throw new Error("Invalid timeline type for a slot: "+k+" ("+h+")");var m=new b.AttachmentTimeline(l.length);m.slotIndex=j;for(var n=0,o=0;o<l.length;o++){var p=l[o];m.setFrame(n++,p.time,p.name)}f.push(m),g=Math.max(g,m.frames[m.getFrameCount()-1])}}}if(a.bones)for(var r in a.bones){var s=a.bones[r],t=d.findBoneIndex(r);if(t==-1)throw new Error("Bone not found: "+r);for(var k in s){var l=s[k];if("rotate"===k){var m=new b.RotateTimeline(l.length);m.boneIndex=t;for(var n=0,o=0;o<l.length;o++){var p=l[o];m.setFrame(n,p.time,p.angle),this.readCurve(p,m,n),n++}f.push(m),g=Math.max(g,m.frames[(m.getFrameCount()-1)*b.RotateTimeline.ENTRIES])}else{if("translate"!==k&&"scale"!==k&&"shear"!==k)throw new Error("Invalid timeline type for a bone: "+k+" ("+r+")");var m=null,u=1;"scale"===k?m=new b.ScaleTimeline(l.length):"shear"===k?m=new b.ShearTimeline(l.length):(m=new b.TranslateTimeline(l.length),u=e),m.boneIndex=t;for(var n=0,o=0;o<l.length;o++){var p=l[o],v=this.getValue(p,"x",0),w=this.getValue(p,"y",0);m.setFrame(n,p.time,v*u,w*u),this.readCurve(p,m,n),n++}f.push(m),g=Math.max(g,m.frames[(m.getFrameCount()-1)*b.TranslateTimeline.ENTRIES])}}}if(a.ik)for(var x in a.ik){var y=a.ik[x],z=d.findIkConstraint(x),m=new b.IkConstraintTimeline(y.length);m.ikConstraintIndex=d.ikConstraints.indexOf(z);for(var n=0,o=0;o<y.length;o++){var p=y[o];m.setFrame(n,p.time,this.getValue(p,"mix",1),this.getValue(p,"bendPositive",!0)?1:-1),this.readCurve(p,m,n),n++}f.push(m),g=Math.max(g,m.frames[(m.getFrameCount()-1)*b.IkConstraintTimeline.ENTRIES])}if(a.transform)for(var x in a.transform){var y=a.transform[x],z=d.findTransformConstraint(x),m=new b.TransformConstraintTimeline(y.length);m.transformConstraintIndex=d.transformConstraints.indexOf(z);for(var n=0,o=0;o<y.length;o++){var p=y[o];m.setFrame(n,p.time,this.getValue(p,"rotateMix",1),this.getValue(p,"translateMix",1),this.getValue(p,"scaleMix",1),this.getValue(p,"shearMix",1)),this.readCurve(p,m,n),n++}f.push(m),g=Math.max(g,m.frames[(m.getFrameCount()-1)*b.TransformConstraintTimeline.ENTRIES])}if(a.paths)for(var x in a.paths){var y=a.paths[x],A=d.findPathConstraintIndex(x);if(A==-1)throw new Error("Path constraint not found: "+x);var B=d.pathConstraints[A];for(var k in y){var l=y[k];if("position"===k||"spacing"===k){var m=null,u=1;"spacing"===k?(m=new b.PathConstraintSpacingTimeline(l.length),B.spacingMode!=b.SpacingMode.Length&&B.spacingMode!=b.SpacingMode.Fixed||(u=e)):(m=new b.PathConstraintPositionTimeline(l.length),B.positionMode==b.PositionMode.Fixed&&(u=e)),m.pathConstraintIndex=A;for(var n=0,o=0;o<l.length;o++){var p=l[o];m.setFrame(n,p.time,this.getValue(p,k,0)*u),this.readCurve(p,m,n),n++}f.push(m),g=Math.max(g,m.frames[(m.getFrameCount()-1)*b.PathConstraintPositionTimeline.ENTRIES])}else if("mix"===k){var m=new b.PathConstraintMixTimeline(l.length);m.pathConstraintIndex=A;for(var n=0,o=0;o<l.length;o++){var p=l[o];m.setFrame(n,p.time,this.getValue(p,"rotateMix",1),this.getValue(p,"translateMix",1)),this.readCurve(p,m,n),n++}f.push(m),g=Math.max(g,m.frames[(m.getFrameCount()-1)*b.PathConstraintMixTimeline.ENTRIES])}}}if(a.deform)for(var C in a.deform){var D=a.deform[C],E=d.findSkin(C);if(null==E)throw new Error("Skin not found: "+C);for(var h in D){var i=D[h],j=d.findSlotIndex(h);if(j==-1)throw new Error("Slot not found: "+i.name);for(var k in i){var l=i[k],F=E.getAttachment(j,k);if(null==F)throw new Error("Deform attachment not found: "+l.name);var G=null!=F.bones,H=F.vertices,I=G?H.length/3*2:H.length,m=new b.DeformTimeline(l.length);m.slotIndex=j,m.attachment=F;for(var n=0,J=0;J<l.length;J++){var p=l[J],K=void 0,L=this.getValue(p,"vertices",null);if(null==L)K=G?b.Utils.newFloatArray(I):H;else{K=b.Utils.newFloatArray(I);var M=this.getValue(p,"offset",0);if(b.Utils.arrayCopy(L,0,K,M,L.length),1!=e)for(var o=M,N=o+L.length;o<N;o++)K[o]*=e;if(!G)for(var o=0;o<I;o++)K[o]+=H[o]}m.setFrame(n,p.time,K),this.readCurve(p,m,n),n++}f.push(m),g=Math.max(g,m.frames[m.getFrameCount()-1])}}}var O=a.drawOrder;if(null==O&&(O=a.draworder),null!=O){for(var m=new b.DrawOrderTimeline(O.length),P=d.slots.length,n=0,J=0;J<O.length;J++){var Q=O[J],R=null,S=this.getValue(Q,"offsets",null);if(null!=S){R=b.Utils.newArray(P,-1);for(var T=b.Utils.newArray(P-S.length,0),U=0,V=0,o=0;o<S.length;o++){var W=S[o],j=d.findSlotIndex(W.slot);if(j==-1)throw new Error("Slot not found: "+W.slot);for(;U!=j;)T[V++]=U++;R[U+W.offset]=U++}for(;U<P;)T[V++]=U++;for(var o=P-1;o>=0;o--)R[o]==-1&&(R[o]=T[--V])}m.setFrame(n++,Q.time,R)}f.push(m),g=Math.max(g,m.frames[m.getFrameCount()-1])}if(a.events){for(var m=new b.EventTimeline(a.events.length),n=0,o=0;o<a.events.length;o++){var X=a.events[o],Y=d.findEvent(X.name);if(null==Y)throw new Error("Event not found: "+X.name);var Z=new b.Event(X.time,Y);Z.intValue=this.getValue(X,"int",Y.intValue),Z.floatValue=this.getValue(X,"float",Y.floatValue),Z.stringValue=this.getValue(X,"string",Y.stringValue),m.setFrame(n++,Z)}f.push(m),g=Math.max(g,m.frames[m.getFrameCount()-1])}if(isNaN(g))throw new Error("Error while parsing animation, duration is NaN");d.animations.push(new b.Animation(c,f,g))},c.prototype.readCurve=function(a,b,c){if(a.curve)if("stepped"===a.curve)b.setStepped(c);else if("[object Array]"===Object.prototype.toString.call(a.curve)){var d=a.curve;b.setCurve(c,d[0],d[1],d[2],d[3])}},c.prototype.getValue=function(a,b,c){return void 0!==a[b]?a[b]:c},c.blendModeFromString=function(b){if("multiply"===b)return a.BLEND_MODES.MULTIPLY;if("additive"===b)return a.BLEND_MODES.ADD;if("screen"===b)return a.BLEND_MODES.SCREEN;if("normal"===b)return a.BLEND_MODES.NORMAL;throw new Error("Unknown blend mode: "+b)},c.positionModeFromString=function(a){if(a=a.toLowerCase(),"fixed"==a)return b.PositionMode.Fixed;if("percent"==a)return b.PositionMode.Percent;throw new Error("Unknown position mode: "+a)},c.spacingModeFromString=function(a){if(a=a.toLowerCase(),"length"==a)return b.SpacingMode.Length;if("fixed"==a)return b.SpacingMode.Fixed;if("percent"==a)return b.SpacingMode.Percent;throw new Error("Unknown position mode: "+a)},c.rotateModeFromString=function(a){if(a=a.toLowerCase(),"tangent"==a)return b.RotateMode.Tangent;if("chain"==a)return b.RotateMode.Chain;if("chainscale"==a)return b.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+a)},c.transformModeFromString=function(a){if(a=a.toLowerCase(),"normal"==a)return b.TransformMode.Normal;if("onlytranslation"==a)return b.TransformMode.OnlyTranslation;if("norotationorreflection"==a)return b.TransformMode.NoRotationOrReflection;if("noscale"==a)return b.TransformMode.NoScale;if("noscaleorreflection"==a)return b.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+a)},c.transformModeLegacy=function(a,c){return console.log("Deprecation Warning: re-export your model with spine 3.5, or downgrade to pixi-spine 1.1 branch. There were many breaking changes, place breakpoint here if you want to know which model is broken"),a&&c?b.TransformMode.Normal:a?b.TransformMode.NoScaleOrReflection:c?b.TransformMode.NoRotationOrReflection:b.TransformMode.OnlyTranslation},c}();b.SkeletonJson=c;var d=function(){function a(a,b,c,d){this.mesh=a,this.skin=b,this.slotIndex=c,this.parent=d}return a}()}(c=b.core||(b.core={}))}(b=a.spine||(a.spine={}))}(PIXI||(PIXI={}));var PIXI;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(a){if(this.attachments=new Array,null==a)throw new Error("name cannot be null.");this.name=a}return a.prototype.addAttachment=function(a,b,c){if(null==c)throw new Error("attachment cannot be null.");var d=this.attachments;a>=d.length&&(d.length=a+1),d[a]||(d[a]={}),d[a][b]=c},a.prototype.getAttachment=function(a,b){var c=this.attachments[a];return c?c[b]:null},a.prototype.attachAll=function(a,b){for(var c=0,d=0;d<a.slots.length;d++){var e=a.slots[d],f=e.getAttachment();if(f&&c<b.attachments.length){var g=b.attachments[c];for(var h in g){var i=g[h];if(f==i){var j=this.getAttachment(c,name);null!=j&&e.setAttachment(j);break}}}c++}},a}();a.Skin=b}(b=a.core||(a.core={}))}(b=a.spine||(a.spine={}))}(PIXI||(PIXI={}));var PIXI;!function(a){var b;!function(a){var b;!function(a){var b=function(){function b(b,c){if(this.attachmentVertices=new Array,null==b)throw new Error("data cannot be null.");if(null==c)throw new Error("bone cannot be null.");this.data=b,this.bone=c,this.color=new a.Color,this.blendMode=b.blendMode,this.setToSetupPose()}return b.prototype.getAttachment=function(){return this.attachment},b.prototype.setAttachment=function(a){this.attachment!=a&&(this.attachment=a,this.attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0)},b.prototype.setAttachmentTime=function(a){this.attachmentTime=this.bone.skeleton.time-a},b.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},b.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},b}();a.Slot=b}(b=a.core||(a.core={}))}(b=a.spine||(a.spine={}))}(PIXI||(PIXI={}));var PIXI;!function(a){var b;!function(a){var b;!function(a){var b=function(){function b(b,c,d){if(this.color=new a.Color(1,1,1,1),b<0)throw new Error("index must be >= 0.");if(null==c)throw new Error("name cannot be null.");if(null==d)throw new Error("boneData cannot be null.");this.index=b,this.name=c,this.boneData=d}return b}();a.SlotData=b}(b=a.core||(a.core={}))}(b=a.spine||(a.spine={}))}(PIXI||(PIXI={}));var PIXI;!function(a){var b;!function(b){var c;!function(b){var c=function(){function a(a){this._image=a}return a.prototype.getImage=function(){return this._image},a.filterFromString=function(a){switch(a.toLowerCase()){case"nearest":return d.Nearest;case"linear":return d.Linear;case"mipmap":return d.MipMap;case"mipmapnearestnearest":return d.MipMapNearestNearest;case"mipmaplinearnearest":return d.MipMapLinearNearest;case"mipmapnearestlinear":return d.MipMapNearestLinear;case"mipmaplinearlinear":return d.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+a)}},a.wrapFromString=function(a){switch(a.toLowerCase()){case"mirroredtepeat":return e.MirroredRepeat;case"clamptoedge":return e.ClampToEdge;case"repeat":return e.Repeat;default:throw new Error("Unknown texture wrap "+a)}},a}();b.Texture=c,function(a){a[a.Nearest=9728]="Nearest",a[a.Linear=9729]="Linear",a[a.MipMap=9987]="MipMap",a[a.MipMapNearestNearest=9984]="MipMapNearestNearest",a[a.MipMapLinearNearest=9985]="MipMapLinearNearest",a[a.MipMapNearestLinear=9986]="MipMapNearestLinear",a[a.MipMapLinearLinear=9987]="MipMapLinearLinear"}(b.TextureFilter||(b.TextureFilter={}));var d=b.TextureFilter;!function(a){a[a.MirroredRepeat=33648]="MirroredRepeat",a[a.ClampToEdge=33071]="ClampToEdge",a[a.Repeat=10497]="Repeat"}(b.TextureWrap||(b.TextureWrap={}));var e=b.TextureWrap,f=function(){function b(){this.size=null}return Object.defineProperty(b.prototype,"width",{get:function(){var b=this.texture;return"3"==a.VERSION[0]?b.crop.width:b.trim?b.trim.width:b.orig.width},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"height",{get:function(){var b=this.texture;return"3"==a.VERSION[0]?b.crop.height:b.trim?b.trim.height:b.orig.height},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"u",{get:function(){return this.texture._uvs.x0},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"v",{get:function(){return this.texture._uvs.y0},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"u2",{get:function(){return this.texture._uvs.x2},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"v2",{get:function(){return this.texture._uvs.y2},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"offsetX",{get:function(){var a=this.texture;return a.trim?a.trim.x:0},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"offsetY",{get:function(){return console.warn("Deprecation Warning: @Hackerham: I guess, if you are using PIXI-SPINE ATLAS region.offsetY, you want a texture, right? Use region.texture from now on."),this.spineOffsetY},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"pixiOffsetY",{get:function(){var a=this.texture;return a.trim?a.trim.y:0},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"spineOffsetY",{get:function(){var a=this.texture;return this.originalHeight-this.height-(a.trim?a.trim.y:0)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"originalWidth",{get:function(){var b=this.texture;return"3"==a.VERSION[0]?b.trim?b.trim.width:b.crop.width:b.orig.width},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"originalHeight",{get:function(){var b=this.texture;return"3"==a.VERSION[0]?b.trim?b.trim.height:b.crop.height:b.orig.height},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"x",{get:function(){return this.texture.frame.x},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"y",{get:function(){return this.texture.frame.y},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"rotate",{get:function(){return 0!==this.texture.rotate},enumerable:!0,configurable:!0}),b}();b.TextureRegion=f}(c=b.core||(b.core={}))}(b=a.spine||(a.spine={}))}(PIXI||(PIXI={}));var PIXI;!function(a){var b;!function(b){var c;!function(b){var c=function(){function c(a,b,c){this.pages=new Array,this.regions=new Array,a&&this.addSpineAtlas(a,b,c)}return c.prototype.addTexture=function(a,c){for(var d=this.pages,g=null,h=0;h<d.length;h++)if(d[h].baseTexture===c.baseTexture){g=d[h];break}if(null===g){g=new e,g.name="texturePage";var i=c.baseTexture;g.width=i.realWidth,g.height=i.realHeight,g.baseTexture=i,g.minFilter=g.magFilter=b.TextureFilter.Nearest,g.uWrap=b.TextureWrap.ClampToEdge,g.vWrap=b.TextureWrap.ClampToEdge,d.push(g)}var j=new f;return j.name=a,j.page=g,j.texture=c,j.index=-1,this.regions.push(j),j},c.prototype.addTextureHash=function(a,b){for(var c in a)a.hasOwnProperty(c)&&this.addTexture(b&&c.indexOf(".")!==-1?c.substr(0,c.lastIndexOf(".")):c,a[c])},c.prototype.addSpineAtlas=function(a,b,c){return this.load(a,b,c)},c.prototype.load=function(c,g,h){var i=this;if(null==g)throw new Error("textureLoader cannot be null.");var j=new d(c),k=new Array(4),l=null,m=function(){for(;;){var c=j.readLine();if(null==c)return h&&h(i);if(c=c.trim(),0==c.length)l=null;else{if(!l){l=new e,l.name=c,2==j.readTuple(k)&&(l.width=parseInt(k[0]),l.height=parseInt(k[1]),j.readTuple(k)),j.readTuple(k),l.minFilter=b.Texture.filterFromString(k[0]),l.magFilter=b.Texture.filterFromString(k[1]);var d=j.readValue();l.uWrap=b.TextureWrap.ClampToEdge,l.vWrap=b.TextureWrap.ClampToEdge,"x"==d?l.uWrap=b.TextureWrap.Repeat:"y"==d?l.vWrap=b.TextureWrap.Repeat:"xy"==d&&(l.uWrap=l.vWrap=b.TextureWrap.Repeat),g(c,function(a){l.baseTexture=a,a.hasLoaded||(a.width=l.width,a.height=l.height),i.pages.push(l),l.setFilters(),l.width&&l.height||(l.width=a.realWidth,l.height=a.realHeight,l.width&&l.height||console.log("ERROR spine atlas page "+l.name+": meshes wont work if you dont specify size in atlas (http://www.html5gamedevs.com/topic/18888-pixi-spines-and-meshes/?p=107121)")),m()}),i.pages.push(l);break}var n=new f;n.name=c,n.page=l;var o="true"==j.readValue()?6:0;j.readTuple(k);var p=parseInt(k[0]),q=parseInt(k[1]);j.readTuple(k);var r=parseInt(k[0]),s=parseInt(k[1]),t=l.baseTexture.resolution;p/=t,q/=t,r/=t,s/=t;var u=new a.Rectangle(p,q,o?s:r,o?r:s);4==j.readTuple(k)&&4==j.readTuple(k)&&j.readTuple(k);var v=parseInt(k[0])/t,w=parseInt(k[1])/t;j.readTuple(k);var x=parseInt(k[0])/t,y=parseInt(k[1])/t,z=new a.Rectangle(0,0,v,w),A=new a.Rectangle(x,w-s-y,r,s);if("4"==a.VERSION[0])n.texture=new a.Texture(n.page.baseTexture,u,z,A,o);else{var B=new a.Rectangle(p,q,r,s),C=B.clone();A.width=v,A.height=w,n.texture=new a.Texture(n.page.baseTexture,B,C,A,o)}n.index=parseInt(j.readValue()),n.texture._updateUvs(),i.regions.push(n)}}};m()},c.prototype.findRegion=function(a){for(var b=0;b<this.regions.length;b++)if(this.regions[b].name==a)return this.regions[b];return null},c.prototype.dispose=function(){for(var a=0;a<this.pages.length;a++)this.pages[a].baseTexture.dispose()},c}();b.TextureAtlas=c;var d=function(){function a(a){this.index=0,this.lines=a.split(/\r\n|\r|\n/)}return a.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},a.prototype.readValue=function(){var a=this.readLine(),b=a.indexOf(":");if(b==-1)throw new Error("Invalid line: "+a);return a.substring(b+1).trim()},a.prototype.readTuple=function(a){var b=this.readLine(),c=b.indexOf(":");if(c==-1)throw new Error("Invalid line: "+b);for(var d=0,e=c+1;d<3;d++){var f=b.indexOf(",",e);if(f==-1)break;a[d]=b.substr(e,f-e).trim(),e=f+1}return a[d]=b.substring(e).trim(),d+1},a}(),e=function(){function c(){}return c.prototype.setFilters=function(){var c=this.baseTexture,d=this.minFilter;d==b.TextureFilter.Linear?c.scaleMode=a.SCALE_MODES.LINEAR:this.minFilter==b.TextureFilter.Nearest?c.scaleMode=a.SCALE_MODES.NEAREST:(c.mipmap=!0,d==b.TextureFilter.MipMapNearestNearest?c.scaleMode=a.SCALE_MODES.NEAREST:c.scaleMode=a.SCALE_MODES.LINEAR)},c}();b.TextureAtlasPage=e;var f=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b}(b.TextureRegion);b.TextureAtlasRegion=f}(c=b.core||(b.core={}))}(b=a.spine||(a.spine={}))}(PIXI||(PIXI={}));var PIXI;!function(a){var b;!function(a){var b;!function(a){var b=function(){function b(b,c){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new a.Vector2,null==b)throw new Error("data cannot be null.");if(null==c)throw new Error("skeleton cannot be null.");this.data=b,this.rotateMix=b.rotateMix,this.translateMix=b.translateMix,this.scaleMix=b.scaleMix,this.shearMix=b.shearMix,this.bones=new Array;for(var d=0;d<b.bones.length;d++)this.bones.push(c.findBone(b.bones[d].name));this.target=c.findBone(b.target.name)}return b.prototype.apply=function(){this.update()},b.prototype.update=function(){for(var b=this.rotateMix,c=this.translateMix,d=this.scaleMix,e=this.shearMix,f=this.target,g=f.matrix.a,h=f.matrix.c,i=f.matrix.b,j=f.matrix.d,k=this.bones,l=0,m=k.length;l<m;l++){var n=k[l],o=n.matrix,p=!1;if(0!=b){var q=o.a,r=o.c,s=o.b,t=o.d,u=Math.atan2(i,g)-Math.atan2(s,q)+this.data.offsetRotation*a.MathUtils.degRad;u>a.MathUtils.PI?u-=a.MathUtils.PI2:u<-a.MathUtils.PI&&(u+=a.MathUtils.PI2),u*=b;var v=Math.cos(u),w=Math.sin(u);o.a=v*q-w*s,o.c=v*r-w*t,o.b=w*q+v*s,o.d=w*r+v*t,p=!0}if(0!=c){var x=this.temp;f.localToWorld(x.set(this.data.offsetX,this.data.offsetY)),o.tx+=(x.x-o.tx)*c,o.ty+=(x.y-o.ty)*c,p=!0}if(d>0){var y=Math.sqrt(o.a*o.a+o.b*o.b),z=Math.sqrt(g*g+i*i);y>1e-5&&(y=(y+(z-y+this.data.offsetScaleX)*d)/y),o.a*=y,o.b*=y,y=Math.sqrt(o.c*o.c+o.d*o.d),z=Math.sqrt(h*h+j*j),y>1e-5&&(y=(y+(z-y+this.data.offsetScaleY)*d)/y),o.c*=y,o.d*=y,p=!0}if(e>0){var r=o.c,t=o.d,A=Math.atan2(t,r),u=Math.atan2(j,h)-Math.atan2(i,g)-(A-Math.atan2(o.b,o.a));u>a.MathUtils.PI?u-=a.MathUtils.PI2:u<-a.MathUtils.PI&&(u+=a.MathUtils.PI2),u=A+(u+this.data.offsetShearY*a.MathUtils.degRad)*e;var y=Math.sqrt(r*r+t*t);o.c=Math.cos(u)*y,o.d=Math.sin(u)*y,p=!0}p&&(n.appliedValid=!1)}},b.prototype.getOrder=function(){return this.data.order},b}();a.TransformConstraint=b}(b=a.core||(a.core={}))}(b=a.spine||(a.spine={}))}(PIXI||(PIXI={}));var PIXI;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(a){if(this.order=0,this.bones=new Array,this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,null==a)throw new Error("name cannot be null.");this.name=a}return a}();a.TransformConstraintData=b}(b=a.core||(a.core={}))}(b=a.spine||(a.spine={}))}(PIXI||(PIXI={}));var PIXI;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(){this.array=new Array}return a.prototype.add=function(a){var b=this.contains(a);return this.array[0|a]=0|a,!b},a.prototype.contains=function(a){return void 0!=this.array[0|a]},a.prototype.remove=function(a){this.array[0|a]=void 0},a.prototype.clear=function(){this.array.length=0},a}();a.IntSet=b;var c=function(){function a(a,b,c,d){void 0===a&&(a=0),void 0===b&&(b=0),void 0===c&&(c=0),void 0===d&&(d=0),this.r=a,this.g=b,this.b=c,this.a=d}return a.prototype.set=function(a,b,c,d){return this.r=a,this.g=b,this.b=c,this.a=d,this.clamp(),this},a.prototype.setFromColor=function(a){return this.r=a.r,this.g=a.g,this.b=a.b,this.a=a.a,this},a.prototype.setFromString=function(a){return a="#"==a.charAt(0)?a.substr(1):a,this.r=parseInt(a.substr(0,2),16)/255,this.g=parseInt(a.substr(2,2),16)/255,this.b=parseInt(a.substr(4,2),16)/255,
this.a=(8!=a.length?255:parseInt(a.substr(6,2),16))/255,this},a.prototype.add=function(a,b,c,d){return this.r+=a,this.g+=b,this.b+=c,this.a+=d,this.clamp(),this},a.prototype.clamp=function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this},a.WHITE=new a(1,1,1,1),a.RED=new a(1,0,0,1),a.GREEN=new a(0,1,0,1),a.BLUE=new a(0,0,1,1),a.MAGENTA=new a(1,0,1,1),a}();a.Color=c;var d=function(){function a(){}return a.clamp=function(a,b,c){return a<b?b:a>c?c:a},a.cosDeg=function(b){return Math.cos(b*a.degRad)},a.sinDeg=function(b){return Math.sin(b*a.degRad)},a.signum=function(a){return a>0?1:a<0?-1:0},a.toInt=function(a){return a>0?Math.floor(a):Math.ceil(a)},a.cbrt=function(a){var b=Math.pow(Math.abs(a),1/3);return a<0?-b:b},a.PI=3.1415927,a.PI2=2*a.PI,a.radiansToDegrees=180/a.PI,a.radDeg=a.radiansToDegrees,a.degreesToRadians=a.PI/180,a.degRad=a.degreesToRadians,a}();a.MathUtils=d;var e=function(){function a(){}return a.arrayCopy=function(a,b,c,d,e){for(var f=b,g=d;f<b+e;f++,g++)c[g]=a[f]},a.setArraySize=function(a,b,c){void 0===c&&(c=0);var d=a.length;if(d==b)return a;if(a.length=b,d<b)for(var e=d;e<b;e++)a[e]=c;return a},a.ensureArrayCapacity=function(b,c,d){return void 0===d&&(d=0),b.length>=c?b:a.setArraySize(b,c,d)},a.newArray=function(a,b){for(var c=new Array(a),d=0;d<a;d++)c[d]=b;return c},a.newFloatArray=function(b){if(a.SUPPORTS_TYPED_ARRAYS)return new Float32Array(b);for(var c=new Array(b),d=0;d<c.length;d++)c[d]=0;return c},a.toFloatArray=function(b){return a.SUPPORTS_TYPED_ARRAYS?new Float32Array(b):b},a.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,a}();a.Utils=e;var f=function(){function a(){}return a.logBones=function(a){for(var b=0;b<a.bones.length;b++){var c=a.bones[b],d=c.matrix;console.log(c.data.name+", "+d.a+", "+d.b+", "+d.c+", "+d.d+", "+d.tx+", "+d.ty)}},a}();a.DebugUtils=f;var g=function(){function a(a){this.items=new Array,this.instantiator=a}return a.prototype.obtain=function(){return this.items.length>0?this.items.pop():this.instantiator()},a.prototype.free=function(a){a.reset&&a.reset(),this.items.push(a)},a.prototype.freeAll=function(a){for(var b=0;b<a.length;b++)a[b].reset&&a[b].reset(),this.items[b]=a[b]},a.prototype.clear=function(){this.items.length=0},a}();a.Pool=g;var h=function(){function a(a,b){void 0===a&&(a=0),void 0===b&&(b=0),this.x=a,this.y=b}return a.prototype.set=function(a,b){return this.x=a,this.y=b,this},a.prototype.length=function(){var a=this.x,b=this.y;return Math.sqrt(a*a+b*b)},a.prototype.normalize=function(){var a=this.length();return 0!=a&&(this.x/=a,this.y/=a),this},a}();a.Vector2=h;var i=function(){function a(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return a.prototype.update=function(){var a=Date.now()/1e3;this.delta=a-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=a,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},a}();a.TimeKeeper=i}(b=a.core||(a.core={}))}(b=a.spine||(a.spine={}))}(PIXI||(PIXI={}));var PIXI;!function(a){var b;!function(b){function c(){return function(c,e){if(!c.data||!c.isJson||!c.data.bones)return e();var f=c.metadata?c.metadata.spineAtlas:null;if(f===!1)return e();if(f&&f.pages){var g=new b.core.SkeletonJson(new b.core.AtlasAttachmentLoader(f)),h=g.readSkeletonData(c.data);return c.spineData=h,c.spineAtlas=f,e()}var i=".atlas";c.metadata&&c.metadata.spineAtlasSuffix&&(i=c.metadata.spineAtlasSuffix);var j=c.url.substr(0,c.url.lastIndexOf("."))+i;j=j.replace(this.baseUrl,"");var k={crossOrigin:c.crossOrigin,xhrType:a.loaders.Resource.XHR_RESPONSE_TYPE.TEXT,metadata:c.metadata?c.metadata.spineMetadata:null},l={crossOrigin:c.crossOrigin,metadata:c.metadata?c.metadata.imageMetadata:null},m=c.url.substr(0,c.url.lastIndexOf("/")+1);m=m.replace(this.baseUrl,"");var n=d(this,c.name+"_atlas_page_",m,l);this.add(c.name+"_atlas",j,k,function(){new b.core.TextureAtlas(this.xhr.responseText,n,function(a){var d=new b.core.SkeletonJson(new b.core.AtlasAttachmentLoader(a)),f=d.readSkeletonData(c.data);c.spineData=f,c.spineAtlas=a,e()})})}}function d(a,b,c,d){return c&&c.lastIndexOf("/")!==c.length-1&&(c+="/"),function(e,f){var g=b+e,h=c+e;a.add(g,h,d,function(a){f(a.texture.baseTexture)})}}function e(b,c){return b&&b.lastIndexOf("/")!==b.length-1&&(b+="/"),function(b,d){d(a.BaseTexture.fromImage(b,c))}}b.atlasParser=c,b.imageLoaderAdapter=d,b.syncImageLoaderAdapter=e,a.loaders.Loader.addPixiMiddleware(c),a.loader.use(c())}(b=a.spine||(a.spine={}))}(PIXI||(PIXI={}));var PIXI;!function(a){var b;!function(b){function g(){var a=this.parent.worldTransform,b=this.worldTransform,c=this.localTransform;b.a=c.a*a.a+c.b*a.c,b.b=c.a*a.b+c.b*a.d,b.c=c.c*a.a+c.d*a.c,b.d=c.c*a.b+c.d*a.d,b.tx=c.tx*a.a+c.ty*a.c+a.tx,b.ty=c.tx*a.b+c.ty*a.d+a.ty,this.worldAlpha=this.alpha*this.parent.worldAlpha,this._currentBounds=null}b.core.Bone.yDown=!0;var c=[0,0,0],d=function(a){function b(b){a.call(this,b)}return __extends(b,a),b}(a.Sprite);b.SpineSprite=d;var e=function(a){function b(b,c,d,e,f){a.call(this,b,c,d,e,f)}return __extends(b,a),b}(a.mesh.Mesh);b.SpineMesh=e;var f=function(f){function h(c){if(f.call(this),this.hackTextureBySlotName=function(a,b,c){void 0===b&&(b=null),void 0===c&&(c=null);var d=this.skeleton.findSlotIndex(a);return d!=-1&&this.hackTextureBySlotIndex(d,b,c)},!c)throw new Error("The spineData param is required.");if("string"==typeof c)throw new Error('spineData param cant be string. Please use PIXI.spine.Spine.fromAtlas("YOUR_RESOURCE_NAME") from now on.');this.spineData=c,this.skeleton=new b.core.Skeleton(c),this.skeleton.updateWorldTransform(),this.stateData=new b.core.AnimationStateData(c),this.state=new b.core.AnimationState(this.stateData),this.slotContainers=[];for(var d=0,e=this.skeleton.slots.length;d<e;d++){var g=this.skeleton.slots[d],h=g.attachment,i=new a.Container;if(this.slotContainers.push(i),this.addChild(i),h instanceof b.core.RegionAttachment){var j=h.region.name,k=this.createSprite(g,h,j);g.currentSprite=k,g.currentSpriteName=j,i.addChild(k)}else{if(!(h instanceof b.core.MeshAttachment))continue;var l=this.createMesh(g,h);g.currentMesh=l,g.currentMeshName=h.name,i.addChild(l)}}this.autoUpdate=!0,this.tintRgb=new Float32Array([1,1,1])}return __extends(h,f),Object.defineProperty(h.prototype,"autoUpdate",{get:function(){return this.updateTransform===h.prototype.autoUpdateTransform},set:function(b){this.updateTransform=b?h.prototype.autoUpdateTransform:a.Container.prototype.updateTransform},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"tint",{get:function(){return a.utils.rgb2hex(this.tintRgb)},set:function(b){this.tintRgb=a.utils.hex2rgb(b,this.tintRgb)},enumerable:!0,configurable:!0}),h.prototype.update=function(d){this.state.update(d),this.state.apply(this.skeleton),this.skeleton.updateWorldTransform();for(var e=this.skeleton.drawOrder,f=this.skeleton.slots,h=0,i=e.length;h<i;h++)this.children[h]=this.slotContainers[e[h].data.index];var j=this.tintRgb[0],k=this.tintRgb[1],l=this.tintRgb[2];for(h=0,i=f.length;h<i;h++){var m=f[h],n=m.attachment,o=this.slotContainers[h];if(n){var p=n.color;if(n instanceof b.core.RegionAttachment){var q=n.region;if(q){var r=q;if(!m.currentSpriteName||m.currentSpriteName!==r.name){var s=r.name;if(m.currentSprite&&(m.currentSprite.visible=!1),m.sprites=m.sprites||{},void 0!==m.sprites[s])m.sprites[s].visible=!0;else{var t=this.createSprite(m,n,s);o.addChild(t)}m.currentSprite=m.sprites[s],m.currentSpriteName=s}}if(o.transform){var u=o.transform,v=u,w=void 0;v.matrix2d?(w=v.matrix2d,v._dirtyVersion++,v.version=v._dirtyVersion,v.isStatic=!0,v.operMode=0):(v.position&&(u=new a.TransformBase,o.transform=u),w=u.localTransform),m.bone.matrix.copy(w)}else{var x=o.localTransform||new a.Matrix;m.bone.matrix.copy(x),o.localTransform=x,o.displayObjectUpdateTransform=g}c[0]=j*m.color.r*p.r,c[1]=k*m.color.g*p.g,c[2]=l*m.color.b*p.b,m.currentSprite.tint=a.utils.rgb2hex(c),m.currentSprite.blendMode=m.blendMode}else{if(!(n instanceof b.core.MeshAttachment)){o.visible=!1;continue}if(!m.currentMeshName||m.currentMeshName!==n.name){var y=n.name;if(m.currentMesh&&(m.currentMesh.visible=!1),m.meshes=m.meshes||{},void 0!==m.meshes[y])m.meshes[y].visible=!0;else{var z=this.createMesh(m,n);o.addChild(z)}m.currentMesh=m.meshes[y],m.currentMeshName=y}if(n.computeWorldVertices(m,m.currentMesh.vertices),"3"!==a.VERSION[0]){var A=m.currentMesh.tintRgb;A[0]=j*m.color.r*p.r,A[1]=k*m.color.g*p.g,A[2]=l*m.color.b*p.b}m.currentMesh.blendMode=m.blendMode}o.visible=!0,o.alpha=m.color.a}else o.visible=!1}},h.prototype.setSpriteRegion=function(a,b,c){b.region=c,b.texture=c.texture,c.size?(b.scale.x=c.size.width/c.originalWidth,b.scale.y=-c.size.height/c.originalHeight):(b.scale.x=a.scaleX*a.width/c.originalWidth,b.scale.y=-a.scaleY*a.height/c.originalHeight)},h.prototype.setMeshRegion=function(a,b,c){b.region=c,b.texture=c.texture,a.updateUVs(c,b.uvs),b.dirty++},h.prototype.autoUpdateTransform=function(){if(h.globalAutoUpdate){this.lastTime=this.lastTime||Date.now();var b=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.update(b)}else this.lastTime=0;a.Container.prototype.updateTransform.call(this)},h.prototype.createSprite=function(a,c,e){var f=c.region;a.tempAttachment===c&&(f=a.tempRegion,a.tempAttachment=null,a.tempRegion=null);var g=f.texture,h=new d(g);return h.rotation=c.rotation*b.core.MathUtils.degRad,h.anchor.x=.5,h.anchor.y=.5,h.position.x=c.x,h.position.y=c.y,h.alpha=c.color.a,h.region=c.region,this.setSpriteRegion(c,h,c.region),a.sprites=a.sprites||{},a.sprites[e]=h,h},h.prototype.createMesh=function(b,c){var d=c.region;b.tempAttachment===c&&(d=b.tempRegion,b.tempAttachment=null,b.tempRegion=null);var f=new e(d.texture,new Float32Array(c.regionUVs.length),new Float32Array(c.regionUVs.length),new Uint16Array(c.triangles),a.mesh.Mesh.DRAW_MODES.TRIANGLES);return f.canvasPadding=1.5,f.alpha=c.color.a,f.region=c.region,this.setMeshRegion(c,f,d),b.meshes=b.meshes||{},b.meshes[c.name]=f,f},h.prototype.hackTextureBySlotIndex=function(a,c,d){void 0===c&&(c=null),void 0===d&&(d=null);var e=this.skeleton.slots[a];if(!e)return!1;var f=e.attachment,g=f.region;return c&&(g=new b.core.TextureRegion,g.texture=c,g.size=d),e.currentSprite&&e.currentSprite.region!=g?(this.setSpriteRegion(f,e.currentSprite,g),e.currentSprite.region=g):e.currentMesh&&e.currentMesh.region!=g?this.setMeshRegion(f,e.currentMesh,g):(e.tempRegion=g,e.tempAttachment=f),!0},h.globalAutoUpdate=!0,h}(a.Container);b.Spine=f}(b=a.spine||(a.spine={}))}(PIXI||(PIXI={}));